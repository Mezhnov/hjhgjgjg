// Telegram Desktop - C++ WinAPI –≤–µ—Ä—Å–∏—è
// –ö–æ–º–ø–∏–ª—è—Ü–∏—è: g++ -o telegram.exe telegram.cpp -lgdi32 -luser32 -lgdiplus -lcomctl32 -mwindows

#include <windows.h>
#include <windowsx.h>
#include <commctrl.h>
#include <gdiplus.h>
#include <string>
#include <vector>
#include <ctime>
#include <algorithm>
#include <sstream>
#include <iomanip>

#pragma comment(lib, "gdi32.lib")
#pragma comment(lib, "user32.lib")
#pragma comment(lib, "gdiplus.lib")
#pragma comment(lib, "comctl32.lib")

using namespace Gdiplus;
using namespace std;

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
const int WINDOW_WIDTH = 1400;
const int WINDOW_HEIGHT = 800;
const int SIDEBAR_WIDTH = 380;
const int CHAT_ITEM_HEIGHT = 74;
const int MESSAGE_BUBBLE_WIDTH = 500;
const int AVATAR_SIZE = 50;
const int SMALL_AVATAR_SIZE = 35;

// –¶–≤–µ—Ç–∞
const COLORREF COLOR_PRIMARY = RGB(0, 136, 204);
const COLORREF COLOR_PRIMARY_DARK = RGB(0, 119, 179);
const COLORREF COLOR_SECONDARY = RGB(42, 47, 50);
const COLORREF COLOR_BG_DARK = RGB(14, 22, 33);
const COLORREF COLOR_BG_DARKER = RGB(10, 16, 26);
const COLORREF COLOR_BG_CARD = RGB(23, 33, 43);
const COLORREF COLOR_BG_MESSAGE_OUT = RGB(43, 82, 120);
const COLORREF COLOR_BG_MESSAGE_IN = RGB(24, 37, 51);
const COLORREF COLOR_TEXT_PRIMARY = RGB(255, 255, 255);
const COLORREF COLOR_TEXT_SECONDARY = RGB(138, 141, 145);
const COLORREF COLOR_ONLINE = RGB(0, 200, 83);
const COLORREF COLOR_TYPING = RGB(0, 136, 204);
const COLORREF COLOR_BORDER = RGB(42, 47, 50);

// –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
struct Chat {
    int id;
    wstring name;
    wstring lastMessage;
    wstring time;
    int unread;
    bool online;
    bool typing;
    COLORREF avatarColor;
};

struct Message {
    int id;
    int chatId;
    wstring text;
    wstring time;
    bool incoming;
    bool read;
    wstring date;
    bool hasAttachment;
    wstring attachmentType;
    wstring attachmentData;
};

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
HWND hMainWnd;
HWND hSidebar;
HWND hChatArea;
HWND hMessageInput;
HWND hSendButton;
HWND hChatList;
HWND hMessagesArea;

HFONT hFontNormal;
HFONT hFontBold;
HFONT hFontSmall;
HFONT hFontLarge;

vector<Chat> chats;
vector<Message> messages;
int activeChatId = 1;
bool isTyping = false;

// –ü—Ä–æ—Ç–æ—Ç–∏–ø—ã —Ñ—É–Ω–∫—Ü–∏–π
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);
LRESULT CALLBACK SidebarProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);
LRESULT CALLBACK ChatAreaProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);
void InitializeApp();
void CreateChats();
void CreateMessages();
void RenderSidebar(HDC hdc, RECT rect);
void RenderChatArea(HDC hdc, RECT rect);
void RenderChatList(HDC hdc, RECT rect);
void RenderMessages(HDC hdc, RECT rect);
void DrawRoundedRect(HDC hdc, int x, int y, int width, int height, int radius, COLORREF fill, COLORREF border);
void DrawTextCentered(HDC hdc, const wstring& text, RECT rect, COLORREF color, HFONT font = NULL);
void DrawTextLeft(HDC hdc, const wstring& text, int x, int y, int width, COLORREF color, HFONT font = NULL);
void DrawAvatar(HDC hdc, int x, int y, int size, COLORREF color, const wstring& initials);
void SwitchChat(int chatId);
void SendMessage();
wstring GetCurrentTime();
void AutoResizeInput();
void UpdateSendButton();
void AddMessage(const wstring& text, bool incoming = false);

// –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è GDI+
    GdiplusStartupInput gdiplusStartupInput;
    ULONG_PTR gdiplusToken;
    GdiplusStartup(&gdiplusToken, &gdiplusStartupInput, NULL);

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    INITCOMMONCONTROLSEX icex;
    icex.dwSize = sizeof(INITCOMMONCONTROLSEX);
    icex.dwICC = ICC_WIN95_CLASSES;
    InitCommonControlsEx(&icex);

    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞
    WNDCLASSEX wc = {0};
    wc.cbSize = sizeof(WNDCLASSEX);
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = WndProc;
    wc.hInstance = hInstance;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = CreateSolidBrush(COLOR_BG_DARKER);
    wc.lpszClassName = L"TelegramDesktop";
    wc.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    
    RegisterClassEx(&wc);

    // –°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞
    hMainWnd = CreateWindowEx(
        0,
        L"TelegramDesktop",
        L"Telegram Desktop",
        WS_OVERLAPPEDWINDOW & ~WS_THICKFRAME & ~WS_MAXIMIZEBOX,
        CW_USEDEFAULT, CW_USEDEFAULT,
        WINDOW_WIDTH, WINDOW_HEIGHT,
        NULL, NULL, hInstance, NULL
    );

    if (!hMainWnd) return 1;

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    InitializeApp();

    // –ü–æ–∫–∞–∑–∞—Ç—å –æ–∫–Ω–æ
    ShowWindow(hMainWnd, nCmdShow);
    UpdateWindow(hMainWnd);

    // –¶–∏–∫–ª —Å–æ–æ–±—â–µ–Ω–∏–π
    MSG msg;
    while (GetMessage(&msg, NULL, 0, 0)) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    // –û—á–∏—Å—Ç–∫–∞ GDI+
    GdiplusShutdown(gdiplusToken);

    return (int)msg.wParam;
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {
    switch (message) {
        case WM_CREATE: {
            // –°–æ–∑–¥–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤
            hFontNormal = CreateFont(14, 0, 0, 0, FW_NORMAL, FALSE, FALSE, FALSE,
                                    DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS,
                                    DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, L"Segoe UI");
            
            hFontBold = CreateFont(14, 0, 0, 0, FW_BOLD, FALSE, FALSE, FALSE,
                                  DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS,
                                  DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, L"Segoe UI");
            
            hFontSmall = CreateFont(12, 0, 0, 0, FW_NORMAL, FALSE, FALSE, FALSE,
                                   DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS,
                                   DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, L"Segoe UI");
            
            hFontLarge = CreateFont(18, 0, 0, 0, FW_BOLD, FALSE, FALSE, FALSE,
                                   DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS,
                                   DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, L"Segoe UI");

            // –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–∏—Ö –æ–∫–æ–Ω
            hSidebar = CreateWindowEx(
                0, L"STATIC", NULL,
                WS_CHILD | WS_VISIBLE | SS_OWNERDRAW,
                0, 0, SIDEBAR_WIDTH, WINDOW_HEIGHT,
                hWnd, NULL, (HINSTANCE)GetWindowLongPtr(hWnd, GWLP_HINSTANCE), NULL
            );

            hChatArea = CreateWindowEx(
                0, L"STATIC", NULL,
                WS_CHILD | WS_VISIBLE | SS_OWNERDRAW,
                SIDEBAR_WIDTH, 0, WINDOW_WIDTH - SIDEBAR_WIDTH, WINDOW_HEIGHT,
                hWnd, NULL, (HINSTANCE)GetWindowLongPtr(hWnd, GWLP_HINSTANCE), NULL
            );

            // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            hMessageInput = CreateWindowEx(
                WS_EX_CLIENTEDGE, L"EDIT", L"",
                WS_CHILD | WS_VISIBLE | ES_MULTILINE | ES_AUTOVSCROLL | ES_WANTRETURN,
                SIDEBAR_WIDTH + 20, WINDOW_HEIGHT - 100, WINDOW_WIDTH - SIDEBAR_WIDTH - 140, 80,
                hWnd, (HMENU)1001, (HINSTANCE)GetWindowLongPtr(hWnd, GWLP_HINSTANCE), NULL
            );

            hSendButton = CreateWindow(
                L"BUTTON", L"‚û§",
                WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON,
                WINDOW_WIDTH - 110, WINDOW_HEIGHT - 100, 80, 80,
                hWnd, (HMENU)1002, (HINSTANCE)GetWindowLongPtr(hWnd, GWLP_HINSTANCE), NULL
            );

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤
            SendMessage(hMessageInput, WM_SETFONT, (WPARAM)hFontNormal, TRUE);
            SendMessage(hSendButton, WM_SETFONT, (WPARAM)hFontLarge, TRUE);

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
            CreateChats();
            CreateMessages();

            break;
        }

        case WM_COMMAND: {
            int wmId = LOWORD(wParam);
            if (wmId == 1002) { // –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
                SendMessage();
            } else if (wmId == 1001 && HIWORD(wParam) == EN_CHANGE) { // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
                UpdateSendButton();
                AutoResizeInput();
            }
            break;
        }

        case WM_PAINT: {
            PAINTSTRUCT ps;
            HDC hdc = BeginPaint(hWnd, &ps);
            
            // –§–æ–Ω
            RECT rect;
            GetClientRect(hWnd, &rect);
            HBRUSH hBrush = CreateSolidBrush(COLOR_BG_DARKER);
            FillRect(hdc, &rect, hBrush);
            DeleteObject(hBrush);
            
            EndPaint(hWnd, &ps);
            break;
        }

        case WM_SIZE: {
            int width = LOWORD(lParam);
            int height = HIWORD(lParam);
            
            // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –¥–æ—á–µ—Ä–Ω–∏—Ö –æ–∫–æ–Ω
            SetWindowPos(hSidebar, NULL, 0, 0, SIDEBAR_WIDTH, height, SWP_NOZORDER);
            SetWindowPos(hChatArea, NULL, SIDEBAR_WIDTH, 0, width - SIDEBAR_WIDTH, height, SWP_NOZORDER);
            
            // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            SetWindowPos(hMessageInput, NULL, 
                        SIDEBAR_WIDTH + 20, height - 100,
                        width - SIDEBAR_WIDTH - 140, 80,
                        SWP_NOZORDER);
            
            SetWindowPos(hSendButton, NULL,
                        width - 110, height - 100,
                        80, 80, SWP_NOZORDER);
            
            InvalidateRect(hSidebar, NULL, TRUE);
            InvalidateRect(hChatArea, NULL, TRUE);
            break;
        }

        case WM_CTLCOLOREDIT: {
            HDC hdc = (HDC)wParam;
            SetBkColor(hdc, COLOR_BG_CARD);
            SetTextColor(hdc, COLOR_TEXT_PRIMARY);
            return (LRESULT)CreateSolidBrush(COLOR_BG_CARD);
        }

        case WM_CTLCOLORBTN: {
            HDC hdc = (HDC)wParam;
            SetBkColor(hdc, COLOR_PRIMARY);
            SetTextColor(hdc, COLOR_TEXT_PRIMARY);
            return (LRESULT)CreateSolidBrush(COLOR_PRIMARY);
        }

        case WM_DESTROY: {
            // –û—á–∏—Å—Ç–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤
            DeleteObject(hFontNormal);
            DeleteObject(hFontBold);
            DeleteObject(hFontSmall);
            DeleteObject(hFontLarge);
            
            PostQuitMessage(0);
            break;
        }

        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
LRESULT CALLBACK SidebarProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {
    switch (message) {
        case WM_PAINT: {
            PAINTSTRUCT ps;
            HDC hdc = BeginPaint(hWnd, &ps);
            
            RECT rect;
            GetClientRect(hWnd, &rect);
            RenderSidebar(hdc, rect);
            
            EndPaint(hWnd, &ps);
            break;
        }

        case WM_LBUTTONDOWN: {
            int x = GET_X_LPARAM(lParam);
            int y = GET_Y_LPARAM(lParam);
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∏–∫–Ω—É—Ç–æ–≥–æ —á–∞—Ç–∞
            int chatIndex = y / CHAT_ITEM_HEIGHT;
            if (chatIndex >= 0 && chatIndex < (int)chats.size()) {
                SwitchChat(chats[chatIndex].id);
                InvalidateRect(hWnd, NULL, TRUE);
                InvalidateRect(hChatArea, NULL, TRUE);
            }
            break;
        }

        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±–ª–∞—Å—Ç–∏ —á–∞—Ç–∞
LRESULT CALLBACK ChatAreaProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {
    switch (message) {
        case WM_PAINT: {
            PAINTSTRUCT ps;
            HDC hdc = BeginPaint(hWnd, &ps);
            
            RECT rect;
            GetClientRect(hWnd, &rect);
            RenderChatArea(hdc, rect);
            
            EndPaint(hWnd, &ps);
            break;
        }

        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
void InitializeApp() {
    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –æ–∫–æ–Ω
    SetWindowLongPtr(hSidebar, GWLP_WNDPROC, (LONG_PTR)SidebarProc);
    SetWindowLongPtr(hChatArea, GWLP_WNDPROC, (LONG_PTR)ChatAreaProc);
}

// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —á–∞—Ç–æ–≤
void CreateChats() {
    chats = {
        {1, L"–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞", L"–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?", L"10:30", 3, true, false, RGB(149, 117, 205)},
        {2, L"–†–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞", L"–ê–ª–µ–∫—Å–µ–π: –ó–∞–≤—Ç—Ä–∞ –≤—Å—Ç—Ä–µ—á–∞ –≤ 11:00", L"–í—á–µ—Ä–∞", 0, false, false, RGB(86, 98, 246)},
        {3, L"–ò–≤–∞–Ω –°–∏–¥–æ—Ä–æ–≤", L"–û—Ç–ø—Ä–∞–≤–∏–ª —Ç–µ–±–µ —Ñ–∞–π–ª", L"–ü–Ω", 1, true, true, RGB(255, 193, 7)},
        {4, L"–ê–Ω–Ω–∞ –ö–æ–≤–∞–ª–µ–≤–∞", L"–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–º–æ—â—å!", L"12 –º–∞—è", 0, false, false, RGB(102, 187, 106)},
        {5, L"–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞", L"–í–∞—à–∞ –∑–∞—è–≤–∫–∞ ‚Ññ12345 –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞", L"11 –º–∞—è", 0, false, false, RGB(121, 134, 203)},
        {6, L"–î–º–∏—Ç—Ä–∏–π –í–æ–ª–∫–æ–≤", L"–î–∞–≤–∞–π –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è –≤ –ø—è—Ç–Ω–∏—Ü—É", L"10 –º–∞—è", 0, true, false, RGB(77, 208, 225)},
        {7, L"–ö–Ω–∏–∂–Ω—ã–π –∫–ª—É–±", L"–ï–ª–µ–Ω–∞: –ü—Ä–µ–¥–ª–∞–≥–∞—é –æ–±—Å—É–¥–∏—Ç—å '1984'", L"9 –º–∞—è", 12, false, false, RGB(255, 138, 101)},
        {8, L"–°–µ—Ä–≥–µ–π –ü–µ—Ç—Ä–æ–≤", L"–§–æ—Ç–æ –∏–∑ –æ—Ç–ø—É—Å–∫–∞", L"8 –º–∞—è", 0, false, false, RGB(171, 71, 188)}
    };
}

// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
void CreateMessages() {
    messages = {
        {1, 1, L"–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?", L"10:28", true, true, L"–°–µ–≥–æ–¥–Ω—è", false, L"", L""},
        {2, 1, L"–ü—Ä–∏–≤–µ—Ç! –í—Å—ë –æ—Ç–ª–∏—á–Ω–æ, —Ç–æ–ª—å–∫–æ —á—Ç–æ –∑–∞–∫–æ–Ω—á–∏–ª –ø—Ä–æ–µ–∫—Ç. –ê —É —Ç–µ–±—è –∫–∞–∫?", L"10:29", false, true, L"", false, L"", L""},
        {3, 1, L"–¢–æ–∂–µ —Ö–æ—Ä–æ—à–æ! –°–ª—É—à–∞–π, —Ç—ã –Ω–µ –≤–∏–¥–µ–ª –º–æ–π –æ—Ç—á—ë—Ç –ø–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É?", L"10:30", true, true, L"", false, L"", L""},
        {4, 1, L"–î–∞, –≤–∏–¥–µ–ª. –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤.", L"10:31", false, true, L"", false, L"", L""},
        {5, 1, L"–°–ø–∞—Å–∏–±–æ! –ú–æ–∂–µ—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é —è –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∞?", L"10:32", true, true, L"", false, L"", L""},
        {6, 1, L"–ö–æ–Ω–µ—á–Ω–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–π!", L"10:33", false, true, L"", false, L"", L""},
        {7, 1, L"", L"10:34", true, true, L"", true, L"document", L"–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è_–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥.pdf|2.4 MB"},
        {8, 1, L"–í–æ—Ç –≥—Ä–∞—Ñ–∏–∫ –ø–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º –¥–∞–Ω–Ω—ã–º", L"10:35", true, true, L"", true, L"image", L""},
        {9, 1, L"–û—Ç–ª–∏—á–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏! –í–∏–¥–Ω–æ, —á—Ç–æ –ø—Ä–æ–≤–µ–ª–∞ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ üëç", L"10:36", false, true, L"", false, L"", L""}
    };
}

// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
void RenderSidebar(HDC hdc, RECT rect) {
    // –§–æ–Ω
    HBRUSH hBrush = CreateSolidBrush(COLOR_BG_CARD);
    FillRect(hdc, &rect, hBrush);
    DeleteObject(hBrush);

    // –®–∞–ø–∫–∞
    RECT headerRect = {0, 0, rect.right, 80};
    hBrush = CreateSolidBrush(COLOR_BG_CARD);
    FillRect(hdc, &headerRect, hBrush);
    DeleteObject(hBrush);

    // –ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    DrawAvatar(hdc, 20, 20, 40, COLOR_PRIMARY, L"–ê–ü");
    
    // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    SetTextColor(hdc, COLOR_TEXT_PRIMARY);
    SelectObject(hdc, hFontBold);
    TextOut(hdc, 70, 25, L"–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤", 15);
    
    // –°—Ç–∞—Ç—É—Å
    SetTextColor(hdc, COLOR_ONLINE);
    SelectObject(hdc, hFontSmall);
    TextOut(hdc, 70, 45, L"online", 6);

    // –ü–æ–∏—Å–∫
    RECT searchRect = {20, 90, rect.right - 20, 130};
    DrawRoundedRect(hdc, searchRect.left, searchRect.top, 
                   searchRect.right - searchRect.left, 
                   searchRect.bottom - searchRect.top,
                   20, COLOR_BG_DARK, COLOR_BORDER);
    
    SetTextColor(hdc, COLOR_TEXT_SECONDARY);
    TextOut(hdc, 40, 105, L"–ü–æ–∏—Å–∫...", 8);

    // –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
    RECT chatsRect = {0, 140, rect.right, rect.bottom};
    RenderChatList(hdc, chatsRect);
}

// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤
void RenderChatList(HDC hdc, RECT rect) {
    int y = rect.top;
    
    for (size_t i = 0; i < chats.size(); i++) {
        Chat& chat = chats[i];
        
        // –í—ã–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–∞—Ç–∞
        if (chat.id == activeChatId) {
            RECT itemRect = {0, y, rect.right, y + CHAT_ITEM_HEIGHT};
            HBRUSH hBrush = CreateSolidBrush(RGB(255, 255, 255, 20));
            FillRect(hdc, &itemRect, hBrush);
            DeleteObject(hBrush);
            
            // –õ–µ–≤–∞—è –ø–æ–ª–æ—Å–∫–∞
            RECT stripeRect = {0, y, 3, y + CHAT_ITEM_HEIGHT};
            hBrush = CreateSolidBrush(COLOR_PRIMARY);
            FillRect(hdc, &stripeRect, hBrush);
            DeleteObject(hBrush);
        }

        // –ê–≤–∞—Ç–∞—Ä
        wstring initials = L"";
        if (!chat.name.empty()) {
            initials += chat.name[0];
            size_t spacePos = chat.name.find(' ');
            if (spacePos != wstring::npos && spacePos + 1 < chat.name.length()) {
                initials += chat.name[spacePos + 1];
            }
        }
        
        DrawAvatar(hdc, 20, y + 12, AVATAR_SIZE, chat.avatarColor, initials);
        
        // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–Ω–ª–∞–π–Ω
        if (chat.online) {
            HBRUSH hBrush = CreateSolidBrush(COLOR_ONLINE);
            HPEN hPen = CreatePen(PS_SOLID, 2, COLOR_BG_CARD);
            HBRUSH oldBrush = (HBRUSH)SelectObject(hdc, hBrush);
            HPEN oldPen = (HPEN)SelectObject(hdc, hPen);
            
            Ellipse(hdc, 20 + AVATAR_SIZE - 12, y + 12 + AVATAR_SIZE - 12,
                   20 + AVATAR_SIZE, y + 12 + AVATAR_SIZE);
            
            SelectObject(hdc, oldBrush);
            SelectObject(hdc, oldPen);
            DeleteObject(hBrush);
            DeleteObject(hPen);
        }

        // –ò–º—è —á–∞—Ç–∞
        SetTextColor(hdc, COLOR_TEXT_PRIMARY);
        SelectObject(hdc, hFontBold);
        TextOut(hdc, 85, y + 15, chat.name.c_str(), chat.name.length());

        // –í—Ä–µ–º—è
        SetTextColor(hdc, COLOR_TEXT_SECONDARY);
        SelectObject(hdc, hFontSmall);
        TextOut(hdc, rect.right - 100, y + 15, chat.time.c_str(), chat.time.length());

        // –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        SetTextColor(hdc, COLOR_TEXT_SECONDARY);
        SelectObject(hdc, hFontNormal);
        
        if (chat.typing) {
            SetTextColor(hdc, COLOR_TYPING);
            TextOut(hdc, 85, y + 40, L"–ø–µ—á–∞—Ç–∞–µ—Ç...", 11);
        } else {
            RECT textRect = {85, y + 40, rect.right - 40, y + 60};
            DrawText(hdc, chat.lastMessage.c_str(), -1, &textRect, DT_LEFT | DT_END_ELLIPSIS | DT_SINGLELINE);
        }

        // –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        if (chat.unread > 0) {
            wstring count = to_wstring(chat.unread);
            if (chat.unread > 9) count = L"9+";
            
            // –ö—Ä—É–≥ –¥–ª—è —Å—á–µ—Ç—á–∏–∫–∞
            HBRUSH hBrush = CreateSolidBrush(COLOR_PRIMARY);
            HPEN hPen = CreatePen(PS_SOLID, 1, COLOR_PRIMARY);
            HBRUSH oldBrush = (HBRUSH)SelectObject(hdc, hBrush);
            HPEN oldPen = (HPEN)SelectObject(hdc, hPen);
            
            int circleSize = 20;
            int circleX = rect.right - 30;
            int circleY = y + 40;
            
            Ellipse(hdc, circleX - circleSize/2, circleY - circleSize/2,
                   circleX + circleSize/2, circleY + circleSize/2);
            
            // –¢–µ–∫—Å—Ç —Å—á–µ—Ç—á–∏–∫–∞
            SetTextColor(hdc, COLOR_TEXT_PRIMARY);
            SelectObject(hdc, hFontSmall);
            
            SIZE textSize;
            GetTextExtentPoint32(hdc, count.c_str(), count.length(), &textSize);
            TextOut(hdc, circleX - textSize.cx/2, circleY - textSize.cy/2, 
                   count.c_str(), count.length());
            
            SelectObject(hdc, oldBrush);
            SelectObject(hdc, oldPen);
            DeleteObject(hBrush);
            DeleteObject(hPen);
        }

        // –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
        HPEN hPen = CreatePen(PS_SOLID, 1, COLOR_BORDER);
        HPEN oldPen = (HPEN)SelectObject(hdc, hPen);
        MoveToEx(hdc, 85, y + CHAT_ITEM_HEIGHT - 1, NULL);
        LineTo(hdc, rect.right, y + CHAT_ITEM_HEIGHT - 1);
        SelectObject(hdc, oldPen);
        DeleteObject(hPen);

        y += CHAT_ITEM_HEIGHT;
    }
}

// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ–±–ª–∞—Å—Ç–∏ —á–∞—Ç–∞
void RenderChatArea(HDC hdc, RECT rect) {
    // –§–æ–Ω
    HBRUSH hBrush = CreateSolidBrush(COLOR_BG_DARK);
    FillRect(hdc, &rect, hBrush);
    DeleteObject(hBrush);

    // –®–∞–ø–∫–∞ —á–∞—Ç–∞
    RECT headerRect = {0, 0, rect.right, 70};
    hBrush = CreateSolidBrush(COLOR_BG_CARD);
    FillRect(hdc, &headerRect, hBrush);
    DeleteObject(hBrush);

    // –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
    HPEN hPen = CreatePen(PS_SOLID, 1, COLOR_BORDER);
    HPEN oldPen = (HPEN)SelectObject(hdc, hPen);
    MoveToEx(hdc, 0, 70, NULL);
    LineTo(hdc, rect.right, 70);
    SelectObject(hdc, oldPen);
    DeleteObject(hPen);

    // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç–∞–∫—Ç–µ
    Chat* activeChat = nullptr;
    for (auto& chat : chats) {
        if (chat.id == activeChatId) {
            activeChat = &chat;
            break;
        }
    }

    if (activeChat) {
        // –ê–≤–∞—Ç–∞—Ä –∫–æ–Ω—Ç–∞–∫—Ç–∞
        wstring initials = L"";
        if (!activeChat->name.empty()) {
            initials += activeChat->name[0];
            size_t spacePos = activeChat->name.find(' ');
            if (spacePos != wstring::npos && spacePos + 1 < activeChat->name.length()) {
                initials += activeChat->name[spacePos + 1];
            }
        }
        
        DrawAvatar(hdc, 20, 15, 45, activeChat->avatarColor, initials);

        // –ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
        SetTextColor(hdc, COLOR_TEXT_PRIMARY);
        SelectObject(hdc, hFontBold);
        TextOut(hdc, 80, 20, activeChat->name.c_str(), activeChat->name.length());

        // –°—Ç–∞—Ç—É—Å
        SetTextColor(hdc, activeChat->online ? COLOR_ONLINE : COLOR_TEXT_SECONDARY);
        SelectObject(hdc, hFontSmall);
        wstring status = activeChat->online ? L"–±—ã–ª(–∞) –≤ —Å–µ—Ç–∏ —Ç–æ–ª—å–∫–æ —á—Ç–æ" : L"–±—ã–ª(–∞) –≤ —Å–µ—Ç–∏ –¥–∞–≤–Ω–æ";
        TextOut(hdc, 80, 42, status.c_str(), status.length());
    }

    // –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π
    RECT messagesRect = {0, 80, rect.right, rect.bottom - 120};
    RenderMessages(hdc, messagesRect);
}

// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
void RenderMessages(HDC hdc, RECT rect) {
    // –§–æ–Ω –æ–±–ª–∞—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
    HBRUSH hBrush = CreateSolidBrush(COLOR_BG_DARK);
    FillRect(hdc, &rect, hBrush);
    DeleteObject(hBrush);

    int y = rect.top + 20;
    wstring lastDate = L"";

    for (const auto& msg : messages) {
        if (msg.chatId != activeChatId) continue;

        // –î–∞—Ç–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
        if (!msg.date.empty() && msg.date != lastDate) {
            // –§–æ–Ω –¥–∞—Ç—ã
            RECT dateRect = {rect.left, y - 10, rect.right, y + 20};
            hBrush = CreateSolidBrush(COLOR_BG_CARD);
            FillRect(hdc, &dateRect, hBrush);
            DeleteObject(hBrush);

            // –¢–µ–∫—Å—Ç –¥–∞—Ç—ã
            SetTextColor(hdc, COLOR_TEXT_SECONDARY);
            SelectObject(hdc, hFontSmall);
            
            SIZE textSize;
            GetTextExtentPoint32(hdc, msg.date.c_str(), msg.date.length(), &textSize);
            TextOut(hdc, (rect.right - rect.left)/2 - textSize.cx/2, y, 
                   msg.date.c_str(), msg.date.length());
            
            y += 40;
            lastDate = msg.date;
        }

        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
        int x = msg.incoming ? 20 : rect.right - MESSAGE_BUBBLE_WIDTH - 20;
        
        // –ê–≤–∞—Ç–∞—Ä –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
        if (msg.incoming) {
            DrawAvatar(hdc, x, y, SMALL_AVATAR_SIZE, RGB(149, 117, 205), L"–ú–ò");
            x += SMALL_AVATAR_SIZE + 10;
        }

        // –ü—É–∑—ã—Ä—å —Å–æ–æ–±—â–µ–Ω–∏—è
        int bubbleWidth = MESSAGE_BUBBLE_WIDTH;
        int bubbleHeight = 60; // –ë–∞–∑–æ–≤–∞—è –≤—ã—Å–æ—Ç–∞
        
        // –†–∞—Å—á–µ—Ç –≤—ã—Å–æ—Ç—ã –ø–æ —Ç–µ–∫—Å—Ç—É
        if (!msg.text.empty()) {
            RECT textRect = {0, 0, bubbleWidth - 20, 0};
            SelectObject(hdc, hFontNormal);
            DrawText(hdc, msg.text.c_str(), -1, &textRect, 
                    DT_LEFT | DT_WORDBREAK | DT_CALCRECT);
            bubbleHeight = textRect.bottom + 40;
        }
        
        if (msg.hasAttachment) {
            bubbleHeight += 80; // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏—è
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—É–∑—ã—Ä—è
        COLORREF bubbleColor = msg.incoming ? COLOR_BG_MESSAGE_IN : COLOR_BG_MESSAGE_OUT;
        DrawRoundedRect(hdc, x, y, bubbleWidth, bubbleHeight, 18, bubbleColor, bubbleColor);

        // –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
        if (!msg.text.empty()) {
            SetTextColor(hdc, msg.incoming ? COLOR_TEXT_PRIMARY : COLOR_TEXT_PRIMARY);
            SelectObject(hdc, hFontNormal);
            
            RECT textRect = {x + 10, y + 10, x + bubbleWidth - 10, y + bubbleHeight - 30};
            DrawText(hdc, msg.text.c_str(), -1, &textRect, 
                    DT_LEFT | DT_WORDBREAK | DT_NOPREFIX);
        }

        // –í–ª–æ–∂–µ–Ω–∏–µ
        if (msg.hasAttachment) {
            int attachmentY = y + (msg.text.empty() ? 10 : 50);
            
            if (msg.attachmentType == L"document") {
                // –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞
                RECT docRect = {x + 10, attachmentY, x + bubbleWidth - 10, attachmentY + 60};
                hBrush = CreateSolidBrush(RGB(255, 255, 255, 10));
                FillRect(hdc, &docRect, hBrush);
                DeleteObject(hBrush);
                
                // –ò–∫–æ–Ω–∫–∞ PDF
                SetTextColor(hdc, COLOR_PRIMARY);
                SelectObject(hdc, hFontLarge);
                TextOut(hdc, x + 20, attachmentY + 15, L"üìÑ", 2);
                
                // –ò–º—è —Ñ–∞–π–ª–∞
                vector<wstring> parts;
                wstringstream wss(msg.attachmentData);
                wstring part;
                while (getline(wss, part, L'|')) {
                    parts.push_back(part);
                }
                
                if (parts.size() >= 1) {
                    SetTextColor(hdc, COLOR_TEXT_PRIMARY);
                    SelectObject(hdc, hFontNormal);
                    TextOut(hdc, x + 50, attachmentY + 10, parts[0].c_str(), parts[0].length());
                }
                
                if (parts.size() >= 2) {
                    SetTextColor(hdc, COLOR_TEXT_SECONDARY);
                    SelectObject(hdc, hFontSmall);
                    TextOut(hdc, x + 50, attachmentY + 30, parts[1].c_str(), parts[1].length());
                }
            } else if (msg.attachmentType == L"image") {
                // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                RECT imgRect = {x + 10, attachmentY, x + bubbleWidth - 10, attachmentY + 150};
                hBrush = CreateSolidBrush(RGB(100, 100, 100));
                FillRect(hdc, &imgRect, hBrush);
                DeleteObject(hBrush);
                
                // –¢–µ–∫—Å—Ç "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
                SetTextColor(hdc, COLOR_TEXT_SECONDARY);
                SelectObject(hdc, hFontSmall);
                TextOut(hdc, x + 20, attachmentY + 65, L"üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ", 14);
            }
        }

        // –í—Ä–µ–º—è –∏ —Å—Ç–∞—Ç—É—Å
        int infoY = y + bubbleHeight - 25;
        int infoX = msg.incoming ? x + 10 : x + bubbleWidth - 100;
        
# Telegram Desktop - C++ WinAPI –≤–µ—Ä—Å–∏—è

## –û–ø–∏—Å–∞–Ω–∏–µ
–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Telegram, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –Ω–∞ C++ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º WinAPI. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–º–∏—Ç–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ Telegram —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
1. **–ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å —á–∞—Ç–∞–º–∏**
   - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–∞
   - –°—á–µ—Ç—á–∏–∫–∏ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞
   - –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

2. **–û–±–ª–∞—Å—Ç—å —á–∞—Ç–∞**
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ü—É–∑—ã—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (–≤—Ö–æ–¥—è—â–∏–µ/–∏—Å—Ö–æ–¥—è—â–∏–µ)
   - –°—Ç–∞—Ç—É—Å—ã –ø—Ä–æ—á—Ç–µ–Ω–∏—è (‚úì, ‚úì‚úì)
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π (–¥–æ–∫—É–º–µ–Ω—Ç—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
   - –î–∞—Ç–∞-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏

3. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**
   - –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∞–≤—Ç–æ-—Ä–µ—Å–∞–π–∑–æ–º
   - –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ (–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ç–µ–∫—Å—Ç–∞)
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏ –ø–æ –∫–ª–∏–∫—É
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã (–∏–º–∏—Ç–∞—Ü–∏—è)

4. **–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã**
   - –°–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤
   - –ê–Ω–∏–º–∞—Ü–∏—è —Ç–æ—á–µ–∫ –ø—Ä–∏ –Ω–∞–±–æ—Ä–µ —Ç–µ–∫—Å—Ç–∞
   - –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã Telegram
   - –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏ —Ç–µ–Ω–∏

### üé® –î–∏–∑–∞–π–Ω:
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–∫–∞–∫ –≤ Telegram Desktop)
- –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞: —Å–∏–Ω–∏–π (–æ—Å–Ω–æ–≤–Ω–æ–π), —Å–µ—Ä—ã–π (—Ñ–æ–Ω)
- –ê–≤–∞—Ç–∞—Ä—ã —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—É–∑—ã—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Ä–∞–∑–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏ –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö/–∏—Å—Ö–æ–¥—è—â–∏—Ö

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ:
- Windows 7 –∏–ª–∏ –≤—ã—à–µ
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä C++ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C++11
- GDI+ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:
- Windows 10/11
- Visual Studio 2019 –∏–ª–∏ –≤—ã—à–µ
- 4 –ì–ë –û–ó–£
- DirectX 9 —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞

## –°–±–æ—Ä–∫–∞ –∏ –∫–æ–º–ø–∏–ª—è—Ü–∏—è

### –°–ø–æ—Å–æ–± 1: MinGW (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MinGW —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π GDI+
g++ -o telegram.exe telegram.cpp -lgdi32 -luser32 -lgdiplus -lcomctl32 -mwindows -std=c++11
```

### –°–ø–æ—Å–æ–± 2: Visual Studio
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç "–ü—É—Å—Ç–æ–π –ø—Ä–æ–µ–∫—Ç"
2. –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª `telegram.cpp`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ–π—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞:
   - **–°–≤–æ–π—Å—Ç–≤–∞ ‚Üí –ö–æ–º–ø–æ–Ω–æ–≤—â–∏–∫ ‚Üí –í–≤–æ–¥**: –¥–æ–±–∞–≤—å—Ç–µ:
     - `gdi32.lib`
     - `user32.lib`
     - `gdiplus.lib`
     - `comctl32.lib`
   - **–°–≤–æ–π—Å—Ç–≤–∞ ‚Üí C/C++ ‚Üí –Ø–∑—ã–∫**: `–°—Ç–∞–Ω–¥–∞—Ä—Ç —è–∑—ã–∫–∞ C++: C++11`
4. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

### –°–ø–æ—Å–æ–± 3: CMake
```cmake
cmake_minimum_required(VERSION 3.10)
project(TelegramDesktop)

set(CMAKE_CXX_STANDARD 11)

add_executable(telegram telegram.cpp)

target_link_libraries(telegram
    gdi32
    user32
    gdiplus
    comctl32
)
```

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### Windows:
```bash
# –ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
telegram.exe
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫:
```bash
# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
start telegram.exe
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
telegram.cpp              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å –∫–æ–¥–æ–º
‚îú‚îÄ‚îÄ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ Chat (—á–∞—Ç)
‚îÇ   ‚îî‚îÄ‚îÄ Message (—Å–æ–æ–±—â–µ–Ω–∏–µ)
‚îú‚îÄ‚îÄ –§—É–Ω–∫—Ü–∏–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ RenderSidebar()
‚îÇ   ‚îú‚îÄ‚îÄ RenderChatArea()
‚îÇ   ‚îú‚îÄ‚îÄ RenderMessages()
‚îÇ   ‚îî‚îÄ‚îÄ DrawRoundedRect()
‚îú‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ–∫–æ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ WndProc()
‚îÇ   ‚îú‚îÄ‚îÄ SidebarProc()
‚îÇ   ‚îî‚îÄ‚îÄ ChatAreaProc()
‚îú‚îÄ‚îÄ –§—É–Ω–∫—Ü–∏–∏ –ª–æ–≥–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ SwitchChat()
‚îÇ   ‚îú‚îÄ‚îÄ SendMessage()
‚îÇ   ‚îî‚îÄ‚îÄ AddMessage()
‚îî‚îÄ‚îÄ –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. **–í—ã–±–æ—Ä —á–∞—Ç–∞**: –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π —á–∞—Ç –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
2. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**:
   - –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤ –Ω–∏–∂–Ω–µ–µ –ø–æ–ª–µ
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "‚û§" –∏–ª–∏ Enter
3. **–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏**: –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–∏–∫–æ –º—ã—à–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ —á–∞—Ç–∞
4. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–∞—Ç–æ–≤**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å

### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:
- **Ctrl + N**: –ù–æ–≤—ã–π —á–∞—Ç (–∑–∞–≥–ª—É—à–∫–∞)
- **Ctrl + F**: –ü–æ–∏—Å–∫ (–∑–∞–≥–ª—É—à–∫–∞)
- **Esc**: –í—ã—Ö–æ–¥
- **Enter**: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- **Tab**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏

## –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ß–∞—Ç—ã:
1. **–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞** - –æ–Ω–ª–∞–π–Ω, 3 –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
2. **–†–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞** - –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—á–µ—Ä–∞
3. **–ò–≤–∞–Ω –°–∏–¥–æ—Ä–æ–≤** - –æ–Ω–ª–∞–π–Ω, –ø–µ—á–∞—Ç–∞–µ—Ç...
4. **–ê–Ω–Ω–∞ –ö–æ–≤–∞–ª–µ–≤–∞** - —Å–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–º–æ—â—å
5. **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –∑–∞—è–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞
6. **–î–º–∏—Ç—Ä–∏–π –í–æ–ª–∫–æ–≤** - –æ–Ω–ª–∞–π–Ω
7. **–ö–Ω–∏–∂–Ω—ã–π –∫–ª—É–±** - 12 –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
8. **–°–µ—Ä–≥–µ–π –ü–µ—Ç—Ä–æ–≤** - —Ñ–æ—Ç–æ –∏–∑ –æ—Ç–ø—É—Å–∫–∞

### –°–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞":
- –ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? (–≤—Ö–æ–¥—è—â–µ–µ)
- –ü—Ä–∏–≤–µ—Ç! –í—Å—ë –æ—Ç–ª–∏—á–Ω–æ... (–∏—Å—Ö–æ–¥—è—â–µ–µ)
- –¢–æ–∂–µ —Ö–æ—Ä–æ—à–æ! –°–ª—É—à–∞–π... (–≤—Ö–æ–¥—è—â–µ–µ)
- –î–∞, –≤–∏–¥–µ–ª. –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! (–∏—Å—Ö–æ–¥—è—â–µ–µ)
- –°–ø–∞—Å–∏–±–æ! –ú–æ–∂–µ—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å... (–≤—Ö–æ–¥—è—â–µ–µ)
- –ö–æ–Ω–µ—á–Ω–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–π! (–∏—Å—Ö–æ–¥—è—â–µ–µ)
- –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è_–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥.pdf (–≤–ª–æ–∂–µ–Ω–∏–µ)
- –í–æ—Ç –≥—Ä–∞—Ñ–∏–∫ –ø–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º –¥–∞–Ω–Ω—ã–º (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- –û—Ç–ª–∏—á–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏! (–∏—Å—Ö–æ–¥—è—â–µ–µ)

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
1. **–°–µ—Ç–µ–≤–∞—è —á–∞—Å—Ç—å**:
   ```cpp
   // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram API
   // WebSocket –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
   ```

2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**:
   ```cpp
   // SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
   // –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–æ–≤
   ```

3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
   - –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏
   - –°—Ç–∏–∫–µ—Ä—ã
   - –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
   - –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**:
   - –°–º–µ–Ω–∞ —Ç–µ–º—ã (—Å–≤–µ—Ç–ª–∞—è/—Ç–µ–º–Ω–∞—è)
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞
   - –®—Ä–∏—Ñ—Ç—ã –∏ —Ä–∞–∑–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞:
```cpp
void AddNewChat(const wstring& name, bool online = false) {
    Chat newChat;
    newChat.id = chats.empty() ? 1 : chats.back().id + 1;
    newChat.name = name;
    newChat.lastMessage = L"–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π";
    newChat.time = L"—Ç–æ–ª—å–∫–æ —á—Ç–æ";
    newChat.unread = 0;
    newChat.online = online;
    newChat.typing = false;
    newChat.avatarColor = RGB(rand() % 256, rand() % 256, rand() % 256);
    
    chats.push_back(newChat);
    InvalidateRect(hSidebar, NULL, TRUE);
}
```

## –û—Ç–ª–∞–¥–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:

1. **–û—à–∏–±–∫–∞ –ª–∏–Ω–∫–æ–≤–∫–∏ GDI+**:
   ```
   undefined reference to `GdiplusStartup'
   ```
   **–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ª–∏–Ω–∫—É–µ—Ç–µ —Å `-lgdiplus`

2. **–û–∫–Ω–æ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è**:
   **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å—Ç–µ —Ñ–ª–∞–≥ `-mwindows` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

3. **–ù–µ—Ç —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã—Ö —É–≥–ª–æ–≤**:
   **–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `RoundRect` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

4. **–£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏**:
   **–†–µ—à–µ–Ω–∏–µ**: –í—Å–µ–≥–¥–∞ —É–¥–∞–ª—è–π—Ç–µ GDI –æ–±—ä–µ–∫—Ç—ã:
   ```cpp
   HBRUSH hBrush = CreateSolidBrush(color);
   // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ...
   DeleteObject(hBrush);
   ```

### –û—Ç–ª–∞–¥–∫–∞ –≤ Visual Studio:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–æ—á–∫—É –æ—Å—Ç–∞–Ω–æ–≤–∞ –≤ `WinMain`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–û—Ç–ª–∞–¥–∫–∞ ‚Üí –û–∫–Ω–∞ ‚Üí –í—ã–≤–æ–¥** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
3. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è API —Ñ—É–Ω–∫—Ü–∏–π

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
1. **–î–≤–æ–π–Ω–∞—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è**: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ä—Ü–∞–Ω–∏–µ
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ GDI –æ–±—ä–µ–∫—Ç–æ–≤**: –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∏—Å—Ç–µ–π –∏ –ø–µ—Ä—å–µ–≤
3. **–ß–∞—Å—Ç–∏—á–Ω–∞—è –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞**: —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `DT_END_ELLIPSIS` –¥–ª—è –¥–ª–∏–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ: 1000
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Ç–æ–≤: 100
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `InvalidateRect()` –≤–º–µ—Å—Ç–æ `InvalidateWindow()`
- –û—Å–≤–æ–±–æ–∂–¥–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã –≤ `WM_DESTROY`

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –∫–æ–¥ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–∏–º–µ—Ä –¥–ª—è –æ–±—É—á–µ–Ω–∏—è. –í—ã –º–æ–∂–µ—Ç–µ:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö
- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏ —É–ª—É—á—à–∞—Ç—å
- –ò–∑—É—á–∞—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã WinAPI

**–ó–∞–ø—Ä–µ—â–µ–Ω–æ**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –í—ã–¥–∞–≤–∞—Ç—å –∑–∞ —Å–≤–æ—é —Ä–∞–±–æ—Ç—É

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
2. –ü–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
3. –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ —É–ª—É—á—à–µ–Ω–∏—è

### –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è WinAPI](https://docs.microsoft.com/windows/win32/api/)
- [GDI+ Reference](https://docs.microsoft.com/windows/win32/gdiplus/-gdiplus-reference)
- [Telegram API](https://core.telegram.org/api)

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ C++
- –†–∞–±–æ—Ç—É —Å WinAPI –∏ GDI+
- –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å –æ—Å–Ω–æ–≤–æ–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
