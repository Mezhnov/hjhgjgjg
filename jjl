/ gta_ui.cpp - single file WinAPI/GDI mock UI similar to screenshot
// No third-party libs. Uses Windows system APIs only.

#define UNICODE
#define _UNICODE
#include <windows.h>
#include <windowsx.h>
#include <stdint.h>

static const wchar_t* kClassName = L"GTA5RP_MockUI";

struct Color { BYTE r,g,b,a; };
static COLORREF RGBc(int r,int g,int b){ return RGB(r,g,b); }

static HBRUSH Brush(COLORREF c){ return CreateSolidBrush(c); }

static void FillRectColor(HDC hdc, const RECT& rc, COLORREF c){
    HBRUSH b = CreateSolidBrush(c);
    FillRect(hdc, &rc, b);
    DeleteObject(b);
}

static void DrawTextSimple(HDC hdc, const wchar_t* text, RECT rc, HFONT font,
                           COLORREF color, UINT format){
    HFONT old = (HFONT)SelectObject(hdc, font);
    SetBkMode(hdc, TRANSPARENT);
    SetTextColor(hdc, color);
    DrawTextW(hdc, text, -1, &rc, format);
    SelectObject(hdc, old);
}

static void DrawLine(HDC hdc, int x1,int y1,int x2,int y2, COLORREF c, int w=1){
    HPEN pen = CreatePen(PS_SOLID, w, c);
    HPEN old = (HPEN)SelectObject(hdc, pen);
    MoveToEx(hdc, x1,y1, NULL);
    LineTo(hdc, x2,y2);
    SelectObject(hdc, old);
    DeleteObject(pen);
}

static void DrawTrianglePlay(HDC hdc, int cx, int cy, int size, COLORREF c){
    POINT p[3];
    p[0] = { cx - size/3, cy - size/2 };
    p[1] = { cx - size/3, cy + size/2 };
    p[2] = { cx + size/2, cy };
    HBRUSH br = CreateSolidBrush(c);
    HPEN pen = CreatePen(PS_SOLID, 1, c);
    HGDIOBJ oldB = SelectObject(hdc, br);
    HGDIOBJ oldP = SelectObject(hdc, pen);
    Polygon(hdc, p, 3);
    SelectObject(hdc, oldB);
    SelectObject(hdc, oldP);
    DeleteObject(br);
    DeleteObject(pen);
}

static HFONT MakeFont(int px, int weight, const wchar_t* name){
    // px: approximate height in pixels
    return CreateFontW(
        -px, 0, 0, 0, weight,
        FALSE, FALSE, FALSE,
        DEFAULT_CHARSET,
        OUT_DEFAULT_PRECIS,
        CLIP_DEFAULT_PRECIS,
        CLEARTYPE_QUALITY,
        DEFAULT_PITCH | FF_DONTCARE,
        name
    );
}

static void DrawRoundedRect(HDC hdc, RECT rc, int radius, COLORREF fill, COLORREF border){
    HBRUSH br = CreateSolidBrush(fill);
    HPEN pen = CreatePen(PS_SOLID, 1, border);
    HGDIOBJ oldB = SelectObject(hdc, br);
    HGDIOBJ oldP = SelectObject(hdc, pen);
    RoundRect(hdc, rc.left, rc.top, rc.right, rc.bottom, radius, radius);
    SelectObject(hdc, oldB);
    SelectObject(hdc, oldP);
    DeleteObject(br);
    DeleteObject(pen);
}

static void DrawCard(HDC hdc, RECT rc, const wchar_t* topLeft,
                     const wchar_t* title, const wchar_t* iconText,
                     HFONT fSmall, HFONT fTitle){
    // card bg
    FillRectColor(hdc, rc, RGBc(36,36,36));
    // border
    DrawLine(hdc, rc.left, rc.top, rc.right, rc.top, RGBc(60,60,60));
    DrawLine(hdc, rc.left, rc.bottom-1, rc.right, rc.bottom-1, RGBc(60,60,60));
    DrawLine(hdc, rc.left, rc.top, rc.left, rc.bottom, RGBc(60,60,60));
    DrawLine(hdc, rc.right-1, rc.top, rc.right-1, rc.bottom, RGBc(60,60,60));

    // subtle overlay
    RECT inner = rc;
    inner.left += 1; inner.top += 1; inner.right -= 1; inner.bottom -= 1;
    // fake "image" gradient stripes
    for(int y=inner.top; y<inner.bottom; y++){
        int t = (y - inner.top) * 255 / max(1,(inner.bottom-inner.top));
        int v = 30 + (t/20);
        DrawLine(hdc, inner.left, y, inner.right, y, RGBc(v,v,v));
    }

    // top-left number+icon
    RECT rTL = rc;
    rTL.left += 18; rTL.top += 16; rTL.right -= 18; rTL.bottom = rTL.top + 22;
    DrawTextSimple(hdc, topLeft, rTL, fSmall, RGBc(220,220,220), DT_LEFT|DT_VCENTER|DT_SINGLELINE);

    // title
    RECT rTitle = rc;
    rTitle.left += 18; rTitle.top += 40; rTitle.right -= 50; rTitle.bottom = rTitle.top + 40;
    DrawTextSimple(hdc, title, rTitle, fTitle, RGBc(255,255,255), DT_LEFT|DT_VCENTER|DT_SINGLELINE);

    // play triangle at right
    int px = rc.right - 30;
    int py = (rc.top + rc.bottom)/2;
    DrawTrianglePlay(hdc, px, py, 18, RGBc(220,220,220));

    // optional small icon text at end of topLeft line (simple)
    if(iconText && iconText[0]){
        RECT rI = rTL;
        rI.left += 32;
        DrawTextSimple(hdc, iconText, rI, fSmall, RGBc(200,200,200), DT_LEFT|DT_VCENTER|DT_SINGLELINE);
    }
}

static void DrawLeftMenu(HDC hdc, RECT rc, HFONT fMenu, HFONT fLogo){
    FillRectColor(hdc, rc, RGBc(26,26,26));
    // separator line
    DrawLine(hdc, rc.right-1, rc.top, rc.right-1, rc.bottom, RGBc(55,55,55));

    // logo area
    RECT rLogo = rc;
    rLogo.left += 16; rLogo.top += 18; rLogo.right -= 16; rLogo.bottom = rLogo.top + 40;
    DrawTextSimple(hdc, L"GTA5", rLogo, fLogo, RGBc(255,255,255), DT_LEFT|DT_VCENTER|DT_SINGLELINE);

    RECT rRP = rLogo;
    rRP.left += 78;
    DrawTextSimple(hdc, L"RP", rRP, fLogo, RGBc(200,200,200), DT_LEFT|DT_VCENTER|DT_SINGLELINE);

    // star (simple polygon)
    POINT star[10];
    int sx = rc.left + 22, sy = rc.top + 32;
    int R=14, r=6;
    for(int i=0;i<10;i++){
        double a = (i*36.0 - 90.0) * 3.1415926535 / 180.0;
        int rad = (i%2==0)?R:r;
        star[i].x = sx + (int)(rad * cos(a));
        star[i].y = sy + (int)(rad * sin(a));
    }
    HBRUSH br = CreateSolidBrush(RGBc(255,140,0));
    HPEN pen = CreatePen(PS_SOLID, 1, RGBc(255,140,0));
    HGDIOBJ ob = SelectObject(hdc, br);
    HGDIOBJ op = SelectObject(hdc, pen);
    Polygon(hdc, star, 10);
    SelectObject(hdc, ob); SelectObject(hdc, op);
    DeleteObject(br); DeleteObject(pen);

    // menu items
    const wchar_t* items[] = { L"Главная", L"Сервера", L"Новости", L"Сообщества", L"Купить GTA V" };
    int y = 90;
    int itemH = 44;

    // active item background (Главная)
    RECT active = { rc.left, rc.top + y, rc.right, rc.top + y + itemH };
    FillRectColor(hdc, active, RGBc(255,128,32));

    for(int i=0;i<5;i++){
        RECT r = { rc.left + 18, rc.top + y + i*itemH, rc.right - 10, rc.top + y + (i+1)*itemH };
        COLORREF col = (i==0)? RGBc(20,20,20) : RGBc(140,140,140);
        DrawTextSimple(hdc, items[i], r, fMenu, col, DT_LEFT|DT_VCENTER|DT_SINGLELINE);
        // small icon square
        RECT icon = { rc.left + 10, r.top + 14, rc.left + 18, r.top + 22 };
        FillRectColor(hdc, icon, (i==0)?RGBc(20,20,20):RGBc(90,90,90));
    }
}

static void DrawTopBar(HDC hdc, RECT rc, HFONT fSmall){
    FillRectColor(hdc, rc, RGBc(32,32,32));
    DrawLine(hdc, rc.left, rc.bottom-1, rc.right, rc.bottom-1, RGBc(55,55,55));

    RECT r = rc;
    r.left += 18; r.top += 6; r.bottom -= 6;
    DrawTextSimple(hdc, L"Сейчас играет:", r, fSmall, RGBc(140,140,140),
                   DT_LEFT|DT_VCENTER|DT_SINGLELINE);

    RECT rN = rc;
    rN.left += 140; rN.top += 6; rN.bottom -= 6;
    DrawTextSimple(hdc, L"44 620", rN, fSmall, RGBc(255,255,255),
                   DT_LEFT|DT_VCENTER|DT_SINGLELINE);

    // window buttons mock (right)
    int bx = rc.right - 120;
    RECT b1 = { bx, rc.top, bx+40, rc.bottom };
    RECT b2 = { bx+40, rc.top, bx+80, rc.bottom };
    RECT b3 = { bx+80, rc.top, bx+120, rc.bottom };
    FillRectColor(hdc, b1, RGBc(32,32,32));
    FillRectColor(hdc, b2, RGBc(32,32,32));
    FillRectColor(hdc, b3, RGBc(32,32,32));
    DrawTextSimple(hdc, L"—", b1, fSmall, RGBc(180,180,180), DT_CENTER|DT_VCENTER|DT_SINGLELINE);
    DrawTextSimple(hdc, L"□", b2, fSmall, RGBc(180,180,180), DT_CENTER|DT_VCENTER|DT_SINGLELINE);
    DrawTextSimple(hdc, L"×", b3, fSmall, RGBc(180,180,180), DT_CENTER|DT_VCENTER|DT_SINGLELINE);
}

static void DrawBanner(HDC hdc, RECT rc, HFONT fH1, HFONT fBody, HFONT fBtn){
    // banner background
    FillRectColor(hdc, rc, RGBc(24,24,24));
    // fake image: diagonal dark bands
    for(int y=rc.top; y<rc.bottom; y++){
        int t = (y-rc.top);
        int v = 20 + (t/6);
        DrawLine(hdc, rc.left, y, rc.right, y, RGBc(v,v,v));
    }
    // overlay border
    DrawLine(hdc, rc.left, rc.bottom-1, rc.right, rc.bottom-1, RGBc(55,55,55));

    RECT t1 = rc; t1.left += 26; t1.top += 26; t1.right -= 260; t1.bottom = t1.top + 50;
    DrawTextSimple(hdc, L"Еще нет GTA V?", t1, fH1, RGBc(255,255,255),
                   DT_LEFT|DT_VCENTER|DT_SINGLELINE);

    RECT t2 = rc; t2.left += 26; t2.top += 78; t2.right -= 260; t2.bottom = t2.top + 44;
    DrawTextSimple(hdc, L"Вы можете приобрести ключ для\nRockstar Games Launcher",
                   t2, fBody, RGBc(220,220,220), DT_LEFT|DT_TOP);

    // button
    RECT btn = rc;
    btn.right -= 26;
    btn.left = btn.right - 210;
    btn.top += 46;
    btn.bottom = btn.top + 52;
    DrawRoundedRect(hdc, btn, 8, RGBc(255,128,32), RGBc(255,128,32));
    DrawTextSimple(hdc, L"Купить", btn, fBtn, RGBc(255,255,255),
                   DT_CENTER|DT_VCENTER|DT_SINGLELINE);
}

static void DrawSectionTitle(HDC hdc, int x, int y, int w, const wchar_t* text, HFONT fTitle){
    RECT r = { x, y, x+w, y+46 };
    DrawTextSimple(hdc, text, r, fTitle, RGBc(255,255,255), DT_LEFT|DT_VCENTER|DT_SINGLELINE);
}

static void DrawTabs(HDC hdc, int x, int y, HFONT fTab){
    RECT all = { x, y, x+70, y+28 };
    FillRectColor(hdc, all, RGBc(255,128,32));
    DrawTextSimple(hdc, L"Все", all, fTab, RGBc(20,20,20), DT_CENTER|DT_VCENTER|DT_SINGLELINE);

    RECT s = { x+76, y, x+156, y+28 };
    FillRectColor(hdc, s, RGBc(50,50,50));
    DrawTextSimple(hdc, L"Стримы", s, fTab, RGBc(230,230,230), DT_CENTER|DT_VCENTER|DT_SINGLELINE);

    RECT v = { x+162, y, x+232, y+28 };
    FillRectColor(hdc, v, RGBc(50,50,50));
    DrawTextSimple(hdc, L"Видео", v, fTab, RGBc(230,230,230), DT_CENTER|DT_VCENTER|DT_SINGLELINE);
}

static LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam){
    switch(msg){
    case WM_ERASEBKGND:
        return 1;
    case WM_PAINT:{
        PAINTSTRUCT ps;
        HDC hdc = BeginPaint(hwnd, &ps);

        RECT client; GetClientRect(hwnd, &client);

        // double buffer
        HDC mem = CreateCompatibleDC(hdc);
        HBITMAP bmp = CreateCompatibleBitmap(hdc, client.right, client.bottom);
        HGDIOBJ oldBmp = SelectObject(mem, bmp);

        // fonts
        HFONT fLogo = MakeFont(20, FW_BOLD, L"Segoe UI");
        HFONT fMenu = MakeFont(16, FW_MEDIUM, L"Segoe UI");
        HFONT fSmall = MakeFont(14, FW_NORMAL, L"Segoe UI");
        HFONT fH1   = MakeFont(34, FW_BOLD, L"Segoe UI");
        HFONT fBody = MakeFont(16, FW_NORMAL, L"Segoe UI");
        HFONT fBtn  = MakeFont(18, FW_BOLD, L"Segoe UI");
        HFONT fSect = MakeFont(24, FW_BOLD, L"Segoe UI");
        HFONT fCardTitle = MakeFont(20, FW_BOLD, L"Segoe UI");
        HFONT fTab = MakeFont(14, FW_NORMAL, L"Segoe UI");

        // background
        FillRectColor(mem, client, RGBc(20,20,20));

        // layout sizes
        int leftW = 240;
        int topH  = 44;

        RECT left = { 0, 0, leftW, client.bottom };
        RECT top  = { leftW, 0, client.right, topH };
        RECT main = { leftW, topH, client.right, client.bottom };

        DrawLeftMenu(mem, left, fMenu, fLogo);
        DrawTopBar(mem, top, fSmall);

        // main background
        FillRectColor(mem, main, RGBc(24,24,24));

        // banner
        RECT banner = { main.left + 24, main.top + 18, main.right - 24, main.top + 170 };
        DrawBanner(mem, banner, fH1, fBody, fBtn);

        // section "РЕКОМЕНДУЕМ ДЛЯ НОВИЧКОВ"
        int secY = banner.bottom + 22;
        DrawSectionTitle(mem, main.left + 24, secY, main.right-main.left-48, L"РЕКОМЕНДУЕМ  ДЛЯ  НОВИЧКОВ", fSect);

        // cards row
        int cardsY = secY + 54;
        int gap = 18;
        int cardW = (main.right - main.left - 48 - gap*2)/3;
        int cardH = 132;

        RECT c1 = { main.left+24, cardsY, main.left+24+cardW, cardsY+cardH };
        RECT c2 = { c1.right+gap, cardsY, c1.right+gap+cardW, cardsY+cardH };
        RECT c3 = { c2.right+gap, cardsY, c2.right+gap+cardW, cardsY+cardH };

        DrawCard(mem, c1, L"14", L"DEL PERRO", L"", fSmall, fCardTitle);
        DrawCard(mem, c2, L"10", L"LA MESA",   L"", fSmall, fCardTitle);
        DrawCard(mem, c3, L"07", L"RAINBOW",   L"", fSmall, fCardTitle);

        // section "ИГРАЙ И СМОТРИ"
        int sec2Y = c1.bottom + 28;
        DrawSectionTitle(mem, main.left + 24, sec2Y, main.right-main.left-48, L"ИГРАЙ  И  СМОТРИ", fSect);
        DrawTabs(mem, main.left + 24, sec2Y + 44, fTab);

        // thumbnails placeholders
        int thumbsY = sec2Y + 86;
        int thumbH = 124;
        int thumbW = (main.right - main.left - 48 - gap*2)/3;

        for(int i=0;i<3;i++){
            RECT t = { main.left+24 + i*(thumbW+gap), thumbsY, main.left+24 + i*(thumbW+gap) + thumbW, thumbsY+thumbH };
            FillRectColor(mem, t, RGBc(45,45,45));
            DrawLine(mem, t.left, t.top, t.right, t.top, RGBc(65,65,65));
            DrawLine(mem, t.left, t.bottom-1, t.right, t.bottom-1, RGBc(65,65,65));
            DrawLine(mem, t.left, t.top, t.left, t.bottom, RGBc(65,65,65));
            DrawLine(mem, t.right-1, t.top, t.right-1, t.bottom, RGBc(65,65,65));

            RECT cap = t; cap.left += 10; cap.top += 10; cap.bottom = cap.top + 22;
            DrawTextSimple(mem, L"Превью", cap, fSmall, RGBc(200,200,200), DT_LEFT|DT_VCENTER|DT_SINGLELINE);
        }

        // blit
        BitBlt(hdc, 0,0, client.right, client.bottom, mem, 0,0, SRCCOPY);

        // cleanup
        DeleteObject(fLogo);
        DeleteObject(fMenu);
        DeleteObject(fSmall);
        DeleteObject(fH1);
        DeleteObject(fBody);
        DeleteObject(fBtn);
        DeleteObject(fSect);
        DeleteObject(fCardTitle);
        DeleteObject(fTab);

        SelectObject(mem, oldBmp);
        DeleteObject(bmp);
        DeleteDC(mem);

        EndPaint(hwnd, &ps);
        return 0;
    }
    case WM_SIZE:
        InvalidateRect(hwnd, NULL, TRUE);
        return 0;
    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;
    }
    return DefWindowProcW(hwnd, msg, wParam, lParam);
}

int WINAPI wWinMain(HINSTANCE hInst, HINSTANCE, PWSTR, int nCmdShow){
    WNDCLASSEXW wc{};
    wc.cbSize = sizeof(wc);
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = WndProc;
    wc.hInstance = hInst;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszClassName = kClassName;
    RegisterClassExW(&wc);

    DWORD style = WS_OVERLAPPEDWINDOW;
    RECT r = {0,0, 1200, 680};
    AdjustWindowRect(&r, style, FALSE);

    HWND hwnd = CreateWindowExW(
        0, kClassName, L"GTA5RP Launcher (Mock)",
        style,
        CW_USEDEFAULT, CW_USEDEFAULT,
        r.right - r.left, r.bottom - r.top,
        NULL, NULL, hInst, NULL
    );
    if(!hwnd) return 0;

    ShowWindow(hwnd, nCmdShow);
    UpdateWindow(hwnd);

    MSG msg;
    while(GetMessageW(&msg, NULL, 0, 0)){
        TranslateMessage(&msg);
        DispatchMessageW(&msg);
    }
    return (int)msg.wParam;
}
