namespace MauiApp3
{
    public partial class MainPage : ContentPage
    {
        public MainPage()
        {
            InitializeComponent();
            InitializeMockData();
        }

        private void InitializeMockData()
        {
            SceneObjectsList.ItemsSource = new List<SceneObject>
            {
                // Lighting Folder
                new SceneObject { Name = "Lighting", Icon = "ğŸ“", IsFolder = true, IsExpanded = true, IndentLevel = 0 },
                new SceneObject { Name = "DirectionalLight", Icon = "â˜€ï¸", IsSelected = false, IndentLevel = 1 },
                new SceneObject { Name = "SkyLight", Icon = "ğŸŒ¤", IsSelected = false, IndentLevel = 1 },
                new SceneObject { Name = "SkyAtmosphere", Icon = "ğŸŒ", IsSelected = false, IndentLevel = 1 },
                
                // Environment
                new SceneObject { Name = "Environment", Icon = "ğŸ“", IsFolder = true, IsExpanded = true, IndentLevel = 0 },
                new SceneObject { Name = "ExponentialHeightFog", Icon = "ğŸŒ«", IsSelected = false, IndentLevel = 1 },
                new SceneObject { Name = "VolumetricCloud", Icon = "â˜ï¸", IsSelected = false, IndentLevel = 1 },
                new SceneObject { Name = "PostProcessVolume", Icon = "ğŸ¨", IsSelected = false, IndentLevel = 1 },
                
                // Geometry
                new SceneObject { Name = "Geometry", Icon = "ğŸ“", IsFolder = true, IsExpanded = false, IndentLevel = 0 },
                new SceneObject { Name = "Floor", Icon = "â¬œ", IsSelected = false, IndentLevel = 1, IsHiddenByFolder = true },
                new SceneObject { Name = "Walls", Icon = "ğŸ§±", IsSelected = false, IndentLevel = 1, IsHiddenByFolder = true },
                
                // Props
                new SceneObject { Name = "Props", Icon = "ğŸ“", IsFolder = true, IsExpanded = true, IndentLevel = 0 },
                new SceneObject { Name = "SM_Couch", Icon = "ğŸ›‹", IsSelected = true, IndentLevel = 1 },
                new SceneObject { Name = "SM_Table", Icon = "ğŸª‘", IsSelected = false, IsLocked = true, IndentLevel = 1 },
                new SceneObject { Name = "SM_Lamp", Icon = "ğŸ’¡", IsSelected = false, IndentLevel = 1 },
                
                // Characters
                new SceneObject { Name = "Characters", Icon = "ğŸ“", IsFolder = true, IsExpanded = false, IndentLevel = 0 },
                new SceneObject { Name = "BP_PlayerCharacter", Icon = "ğŸ§", IsSelected = false, IndentLevel = 1, IsHiddenByFolder = true },
                
                // Root level actors
                new SceneObject { Name = "CameraActor", Icon = "ğŸ¥", IsSelected = false, IndentLevel = 0 },
                new SceneObject { Name = "PlayerStart", Icon = "ğŸš©", IsSelected = false, IndentLevel = 0 },
            };
        }

        private void OnSaveClicked(object sender, EventArgs e)
        {
            DisplayAlert("Unreal Engine", "All assets saved successfully!", "OK");
        }

        private void OnPlayClicked(object sender, EventArgs e)
        {
            DisplayAlert("Play", "Starting Play in Editor...", "OK");
        }

        public class SceneObject
        {
            public string? Name { get; set; }
            public string? Icon { get; set; }
            public bool IsFolder { get; set; } = false;
            public bool IsExpanded { get; set; } = false;
            public bool IsSelected { get; set; } = false;
            public bool IsLocked { get; set; } = false;
            public bool IsVisible { get; set; } = true;
            public bool IsHiddenByFolder { get; set; } = false;
            public int IndentLevel { get; set; } = 0;

            // Computed display properties
            public string DisplayName => Name ?? "";

            public string ExpandIcon
            {
                get
                {
                    if (IsFolder)
                        return IsExpanded ? "â–¼" : "â–¶";
                    if (IndentLevel > 0)
                        return "  ";
                    return "";
                }
            }

            public string NameColor
            {
                get
                {
                    if (IsSelected) return "#FFFFFF";
                    if (IsFolder) return "#D0D0D0";
                    if (IsLocked) return "#707070";
                    return "#B0B0B0";
                }
            }

            public string RowBackground
            {
                get
                {
                    if (IsSelected) return "#1A3A5C";
                    if (IsFolder) return "#1E1E1E";
                    return "Transparent";
                }
            }

            public string LockIcon => IsLocked ? "ğŸ”’" : "";
            public bool ShowLock => IsLocked;

            public string VisibilityIcon => IsVisible ? "ğŸ‘" : "ğŸ‘â€ğŸ—¨";
        }
    }
}
