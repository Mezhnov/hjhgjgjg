<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiApp3.MainPage"
             BackgroundColor="#1E1E1E">

    <ContentPage.Resources>
        <!-- UE5/Unity Dark Theme Colors -->
        <Color x:Key="BgDark">#1A1A1A</Color>
        <Color x:Key="BgMain">#242424</Color>
        <Color x:Key="BgPanel">#2D2D30</Color>
        <Color x:Key="BgHeader">#323232</Color>
        <Color x:Key="BgInput">#1E1E1E</Color>
        <Color x:Key="BgHover">#3E3E42</Color>
        <Color x:Key="BgSelected">#094771</Color>
        <Color x:Key="TextWhite">#E0E0E0</Color>
        <Color x:Key="TextGray">#A0A0A0</Color>
        <Color x:Key="TextDim">#6A6A6A</Color>
        <Color x:Key="Border">#404040</Color>
        <Color x:Key="BorderLight">#505050</Color>
        <Color x:Key="Accent">#0D7ACC</Color>
        <Color x:Key="AccentOrange">#E67E22</Color>
        <Color x:Key="PlayGreen">#2ECC71</Color>
        <Color x:Key="StopRed">#E74C3C</Color>
        <Color x:Key="PauseYellow">#F39C12</Color>
        <Color x:Key="ViewportBg">#1A1A1A</Color>
        <Color x:Key="GridColor">#2A2A2A</Color>

        <!-- Header Style -->
        <Style x:Key="LblHeader" TargetType="Label">
            <Setter Property="TextColor" Value="{StaticResource TextWhite}"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontAttributes" Value="Bold"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="BackgroundColor" Value="{StaticResource BgHeader}"/>
        </Style>

        <!-- Tab Styles -->
        <Style x:Key="LblTab" TargetType="Label">
            <Setter Property="TextColor" Value="{StaticResource TextGray}"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="BackgroundColor" Value="{StaticResource BgPanel}"/>
        </Style>

        <Style x:Key="LblTabActive" TargetType="Label">
            <Setter Property="TextColor" Value="{StaticResource TextWhite}"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="BackgroundColor" Value="{StaticResource BgHeader}"/>
        </Style>

        <!-- Toolbar Button Style -->
        <Style x:Key="ToolbarBtn" TargetType="Button">
            <Setter Property="BackgroundColor" Value="Transparent"/>
            <Setter Property="TextColor" Value="{StaticResource TextGray}"/>
            <Setter Property="WidthRequest" Value="28"/>
            <Setter Property="HeightRequest" Value="24"/>
            <Setter Property="CornerRadius" Value="3"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="BorderWidth" Value="0"/>
        </Style>

        <!-- Section Header -->
        <Style x:Key="SectionHeader" TargetType="Label">
            <Setter Property="TextColor" Value="{StaticResource Accent}"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="FontAttributes" Value="Bold"/>
            <Setter Property="Padding" Value="0,8,0,4"/>
        </Style>

        <!-- Property Label -->
        <Style x:Key="PropLabel" TargetType="Label">
            <Setter Property="TextColor" Value="{StaticResource TextGray}"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="VerticalOptions" Value="Center"/>
        </Style>

        <!-- Property Entry -->
        <Style x:Key="PropEntry" TargetType="Entry">
            <Setter Property="TextColor" Value="{StaticResource TextWhite}"/>
            <Setter Property="BackgroundColor" Value="{StaticResource BgInput}"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="HeightRequest" Value="22"/>
        </Style>
    </ContentPage.Resources>

    <!-- Main Layout: Top Menu(26) - Toolbar(32) - Workspace(*) - StatusBar(22) -->
    <Grid RowDefinitions="26, 34, *, 22" BackgroundColor="{StaticResource BgDark}">

        <!-- === TOP MENU BAR === -->
        <Grid Grid.Row="0" BackgroundColor="{StaticResource BgDark}" ColumnDefinitions="Auto,*,Auto">
            <HorizontalStackLayout Grid.Column="0" Spacing="0" VerticalOptions="Center">
                <!-- Logo -->
                <Border Stroke="Transparent" BackgroundColor="{StaticResource AccentOrange}" WidthRequest="26" HeightRequest="26">
                    <Label Text="â¬¢" TextColor="White" FontSize="16" HorizontalOptions="Center" VerticalOptions="Center"/>
                </Border>
                
                <!-- Menu Items -->
                <Border Stroke="Transparent" BackgroundColor="Transparent" Padding="12,0">
                    <Label Text="File" TextColor="{StaticResource TextGray}" FontSize="11" VerticalOptions="Center"/>
                </Border>
                <Border Stroke="Transparent" BackgroundColor="Transparent" Padding="12,0">
                    <Label Text="Edit" TextColor="{StaticResource TextGray}" FontSize="11" VerticalOptions="Center"/>
                </Border>
                <Border Stroke="Transparent" BackgroundColor="Transparent" Padding="12,0">
                    <Label Text="Window" TextColor="{StaticResource TextGray}" FontSize="11" VerticalOptions="Center"/>
                </Border>
                <Border Stroke="Transparent" BackgroundColor="Transparent" Padding="12,0">
                    <Label Text="Tools" TextColor="{StaticResource TextGray}" FontSize="11" VerticalOptions="Center"/>
                </Border>
                <Border Stroke="Transparent" BackgroundColor="Transparent" Padding="12,0">
                    <Label Text="Build" TextColor="{StaticResource TextGray}" FontSize="11" VerticalOptions="Center"/>
                </Border>
                <Border Stroke="Transparent" BackgroundColor="Transparent" Padding="12,0">
                    <Label Text="Help" TextColor="{StaticResource TextGray}" FontSize="11" VerticalOptions="Center"/>
                </Border>
            </HorizontalStackLayout>

            <!-- Project Name -->
            <Label Grid.Column="1" Text="MyProject - Unreal Editor" TextColor="{StaticResource TextDim}" FontSize="10" HorizontalOptions="Center" VerticalOptions="Center"/>

            <!-- Window Controls -->
            <HorizontalStackLayout Grid.Column="2" Spacing="0" VerticalOptions="Center">
                <Button Text="â€•" Style="{StaticResource ToolbarBtn}" WidthRequest="40"/>
                <Button Text="â˜" Style="{StaticResource ToolbarBtn}" WidthRequest="40"/>
                <Button Text="âœ•" Style="{StaticResource ToolbarBtn}" WidthRequest="40" TextColor="{StaticResource StopRed}"/>
            </HorizontalStackLayout>
        </Grid>

        <!-- === MAIN TOOLBAR === -->
        <Border Grid.Row="1" BackgroundColor="{StaticResource BgPanel}" StrokeThickness="0,0,0,1" Stroke="{StaticResource Border}">
            <Grid ColumnDefinitions="Auto, Auto, *, Auto, Auto">
                
                <!-- Left Tools -->
                <HorizontalStackLayout Grid.Column="0" Spacing="2" VerticalOptions="Center" Margin="8,0">
                    <Button Text="ðŸ’¾" Style="{StaticResource ToolbarBtn}" Clicked="OnSaveClicked"/>
                    <BoxView WidthRequest="1" BackgroundColor="{StaticResource Border}" HeightRequest="20" Margin="4,0"/>
                    <Button Text="ðŸ“" Style="{StaticResource ToolbarBtn}"/>
                    <Button Text="ðŸ“‚" Style="{StaticResource ToolbarBtn}"/>
                    <BoxView WidthRequest="1" BackgroundColor="{StaticResource Border}" HeightRequest="20" Margin="4,0"/>
                    <Button Text="â†©" Style="{StaticResource ToolbarBtn}"/>
                    <Button Text="â†ª" Style="{StaticResource ToolbarBtn}"/>
                    <BoxView WidthRequest="1" BackgroundColor="{StaticResource Border}" HeightRequest="20" Margin="4,0"/>
                    <Button Text="ðŸ›’" Style="{StaticResource ToolbarBtn}"/>
                    <Button Text="âš™" Style="{StaticResource ToolbarBtn}"/>
                </HorizontalStackLayout>

                <!-- Transform Tools -->
                <Border Grid.Column="1" BackgroundColor="{StaticResource BgHeader}" StrokeShape="RoundRectangle 4" Stroke="{StaticResource Border}" Padding="4,2" Margin="10,0">
                    <HorizontalStackLayout Spacing="2">
                        <Button Text="âœ¥" Style="{StaticResource ToolbarBtn}" BackgroundColor="{StaticResource BgSelected}"/>
                        <Button Text="â†»" Style="{StaticResource ToolbarBtn}"/>
                        <Button Text="â¤¡" Style="{StaticResource ToolbarBtn}"/>
                        <BoxView WidthRequest="1" BackgroundColor="{StaticResource Border}" HeightRequest="16" Margin="4,0"/>
                        <Button Text="â–¦" Style="{StaticResource ToolbarBtn}"/>
                        <Button Text="âŠž" Style="{StaticResource ToolbarBtn}"/>
                    </HorizontalStackLayout>
                </Border>

                <!-- Center - Play Controls -->
                <HorizontalStackLayout Grid.Column="2" HorizontalOptions="Center" Spacing="4" VerticalOptions="Center">
                    <Border BackgroundColor="{StaticResource BgHeader}" StrokeShape="RoundRectangle 4" Stroke="{StaticResource Border}" Padding="3">
                        <HorizontalStackLayout Spacing="2">
                            <Button Text="â—€" Style="{StaticResource ToolbarBtn}" WidthRequest="32"/>
                            <Button Text="â–¶" BackgroundColor="{StaticResource PlayGreen}" TextColor="White" WidthRequest="50" HeightRequest="26" CornerRadius="3" FontSize="12" FontAttributes="Bold" Padding="0"/>
                            <Button Text="â¸" Style="{StaticResource ToolbarBtn}" WidthRequest="32"/>
                            <Button Text="â– " Style="{StaticResource ToolbarBtn}" WidthRequest="32"/>
                            <Button Text="â­" Style="{StaticResource ToolbarBtn}" WidthRequest="32"/>
                        </HorizontalStackLayout>
                    </Border>

                    <Border BackgroundColor="{StaticResource BgHeader}" StrokeShape="RoundRectangle 4" Stroke="{StaticResource Border}" Padding="6,3" Margin="10,0,0,0">
                        <HorizontalStackLayout Spacing="4">
                            <Label Text="ðŸ–¥" TextColor="{StaticResource TextGray}" FontSize="12" VerticalOptions="Center"/>
                            <Label Text="Selected Viewport â–¾" TextColor="{StaticResource TextGray}" FontSize="10" VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Border>
                </HorizontalStackLayout>

                <!-- Build/Launch -->
                <HorizontalStackLayout Grid.Column="3" Spacing="4" VerticalOptions="Center" Margin="0,0,8,0">
                    <Border BackgroundColor="{StaticResource BgHeader}" StrokeShape="RoundRectangle 4" Stroke="{StaticResource Border}" Padding="8,4">
                        <HorizontalStackLayout Spacing="4">
                            <Label Text="ðŸ”¨" FontSize="11" VerticalOptions="Center"/>
                            <Label Text="Build" TextColor="{StaticResource TextGray}" FontSize="10" VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Border>
                    <Border BackgroundColor="{StaticResource AccentOrange}" StrokeShape="RoundRectangle 4" Stroke="Transparent" Padding="8,4">
                        <HorizontalStackLayout Spacing="4">
                            <Label Text="ðŸš€" FontSize="11" VerticalOptions="Center"/>
                            <Label Text="Launch" TextColor="White" FontSize="10" VerticalOptions="Center" FontAttributes="Bold"/>
                        </HorizontalStackLayout>
                    </Border>
                </HorizontalStackLayout>

                <!-- Right Icons -->
                <HorizontalStackLayout Grid.Column="4" Spacing="6" VerticalOptions="Center" Margin="0,0,10,0">
                    <Label Text="ðŸ””" TextColor="{StaticResource TextGray}" FontSize="12"/>
                    <Label Text="ðŸ’¬" TextColor="{StaticResource TextGray}" FontSize="12"/>
                    <Border BackgroundColor="{StaticResource Accent}" StrokeShape="Ellipse" WidthRequest="22" HeightRequest="22">
                        <Label Text="U" TextColor="White" FontSize="10" FontAttributes="Bold" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </Border>
                </HorizontalStackLayout>
            </Grid>
        </Border>

        <!-- === WORKSPACE === -->
        <Grid Grid.Row="2" ColumnDefinitions="220, 3, *, 3, 320" BackgroundColor="{StaticResource BgDark}">

            <!-- LEFT PANEL - MODES + PLACE ACTORS -->
            <Grid Grid.Column="0" RowDefinitions="Auto, *, Auto, *" BackgroundColor="{StaticResource BgPanel}">
                
                <!-- Modes Tabs -->
                <Border Grid.Row="0" BackgroundColor="{StaticResource BgHeader}" Stroke="Transparent">
                    <HorizontalStackLayout Spacing="0">
                        <Border BackgroundColor="{StaticResource BgMain}" Padding="12,6" StrokeThickness="0,0,0,2" Stroke="{StaticResource Accent}">
                            <Label Text="Place Actors" TextColor="{StaticResource TextWhite}" FontSize="10"/>
                        </Border>
                        <Border BackgroundColor="Transparent" Padding="12,6">
                            <Label Text="Modes" TextColor="{StaticResource TextDim}" FontSize="10"/>
                        </Border>
                    </HorizontalStackLayout>
                </Border>

                <!-- Search -->
                <Border Grid.Row="1" BackgroundColor="{StaticResource BgMain}" Margin="6" StrokeShape="RoundRectangle 4" Stroke="{StaticResource Border}">
                    <Entry Placeholder="ðŸ” Search Classes..." PlaceholderColor="{StaticResource TextDim}" TextColor="{StaticResource TextWhite}" BackgroundColor="Transparent" FontSize="10"/>
                </Border>

                <!-- Categories -->
                <ScrollView Grid.Row="2">
                    <VerticalStackLayout Spacing="0">
                        <!-- Category: Recently Placed -->
                        <Border BackgroundColor="{StaticResource BgHeader}" Padding="8,6">
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Label Text="â–¼" TextColor="{StaticResource TextDim}" FontSize="8" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="Recently Placed" TextColor="{StaticResource TextWhite}" FontSize="10" Margin="6,0,0,0"/>
                                <Label Grid.Column="2" Text="5" TextColor="{StaticResource TextDim}" FontSize="9"/>
                            </Grid>
                        </Border>

                        <!-- Category Items -->
                        <VerticalStackLayout BackgroundColor="{StaticResource BgMain}" Padding="4">
                            <Grid Padding="8,4" ColumnDefinitions="24,*">
                                <Label Text="ðŸ“¦" FontSize="14" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="Cube" TextColor="{StaticResource TextGray}" FontSize="10" VerticalOptions="Center"/>
                            </Grid>
                            <Grid Padding="8,4" ColumnDefinitions="24,*" BackgroundColor="{StaticResource BgSelected}">
                                <Label Text="ðŸ”µ" FontSize="14" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="Sphere" TextColor="{StaticResource TextWhite}" FontSize="10" VerticalOptions="Center"/>
                            </Grid>
                            <Grid Padding="8,4" ColumnDefinitions="24,*">
                                <Label Text="ðŸ”º" FontSize="14" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="Cone" TextColor="{StaticResource TextGray}" FontSize="10" VerticalOptions="Center"/>
                            </Grid>
                        </VerticalStackLayout>

                        <!-- Category: Lights -->
                        <Border BackgroundColor="{StaticResource BgHeader}" Padding="8,6">
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Label Text="â–¶" TextColor="{StaticResource TextDim}" FontSize="8" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="Lights" TextColor="{StaticResource TextWhite}" FontSize="10" Margin="6,0,0,0"/>
                                <Label Grid.Column="2" Text="8" TextColor="{StaticResource TextDim}" FontSize="9"/>
                            </Grid>
                        </Border>

                        <!-- Category: Visual Effects -->
                        <Border BackgroundColor="{StaticResource BgHeader}" Padding="8,6">
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Label Text="â–¶" TextColor="{StaticResource TextDim}" FontSize="8" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="Visual Effects" TextColor="{StaticResource TextWhite}" FontSize="10" Margin="6,0,0,0"/>
                                <Label Grid.Column="2" Text="12" TextColor="{StaticResource TextDim}" FontSize="9"/>
                            </Grid>
                        </Border>

                        <!-- Category: Geometry -->
                        <Border BackgroundColor="{StaticResource BgHeader}" Padding="8,6">
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Label Text="â–¶" TextColor="{StaticResource TextDim}" FontSize="8" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="Geometry" TextColor="{StaticResource TextWhite}" FontSize="10" Margin="6,0,0,0"/>
                                <Label Grid.Column="2" Text="6" TextColor="{StaticResource TextDim}" FontSize="9"/>
                            </Grid>
                        </Border>

                        <!-- Category: Volumes -->
                        <Border BackgroundColor="{StaticResource BgHeader}" Padding="8,6">
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Label Text="â–¶" TextColor="{StaticResource TextDim}" FontSize="8" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="Volumes" TextColor="{StaticResource TextWhite}" FontSize="10" Margin="6,0,0,0"/>
                                <Label Grid.Column="2" Text="15" TextColor="{StaticResource TextDim}" FontSize="9"/>
                            </Grid>
                        </Border>

                        <!-- Category: All Classes -->
                        <Border BackgroundColor="{StaticResource BgHeader}" Padding="8,6">
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Label Text="â–¶" TextColor="{StaticResource TextDim}" FontSize="8" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text="All Classes" TextColor="{StaticResource TextWhite}" FontSize="10" Margin="6,0,0,0"/>
                                <Label Grid.Column="2" Text="âˆž" TextColor="{StaticResource TextDim}" FontSize="9"/>
                            </Grid>
                        </Border>
                    </VerticalStackLayout>
                </ScrollView>
            </Grid>

            <!-- Left Splitter -->
            <BoxView Grid.Column="1" BackgroundColor="{StaticResource Border}" WidthRequest="1"/>

            <!-- CENTER - VIEWPORT -->
            <Grid Grid.Column="2" BackgroundColor="{StaticResource ViewportBg}">
                
                <!-- Viewport Tabs -->
                <Border VerticalOptions="Start" BackgroundColor="{StaticResource BgHeader}" HeightRequest="26">
                    <HorizontalStackLayout Spacing="0">
                        <Border BackgroundColor="{StaticResource BgMain}" Padding="14,4" StrokeThickness="0,0,0,2" Stroke="{StaticResource Accent}">
                            <HorizontalStackLayout Spacing="6">
                                <Label Text="ðŸŽ®" FontSize="10" VerticalOptions="Center"/>
                                <Label Text="Viewport 1" TextColor="{StaticResource TextWhite}" FontSize="10"/>
                                <Label Text="âœ•" TextColor="{StaticResource TextDim}" FontSize="8"/>
                            </HorizontalStackLayout>
                        </Border>
                        <Border BackgroundColor="Transparent" Padding="14,4">
                            <HorizontalStackLayout Spacing="6">
                                <Label Text="ðŸ“‹" FontSize="10" VerticalOptions="Center"/>
                                <Label Text="Blueprint" TextColor="{StaticResource TextDim}" FontSize="10"/>
                            </HorizontalStackLayout>
                        </Border>
                        <Border BackgroundColor="Transparent" Padding="8,4">
                            <Label Text="+" TextColor="{StaticResource TextDim}" FontSize="14"/>
                        </Border>
                    </HorizontalStackLayout>
                </Border>

                <!-- Viewport Content -->
                <Grid Margin="0,26,0,0">
                    <!-- Grid Pattern -->
                    <BoxView BackgroundColor="{StaticResource ViewportBg}"/>
                    
                    <!-- Horizon Line -->
                    <BoxView HeightRequest="1" BackgroundColor="#333" VerticalOptions="Center"/>
                    
                    <!-- 3D Grid (Simulated) -->
                    <Grid HorizontalOptions="Center" VerticalOptions="Center">
                        <!-- Floor Grid -->
                        <BoxView WidthRequest="400" HeightRequest="200" BackgroundColor="#1F1F1F" CornerRadius="0"/>
                        
                        <!-- Grid Lines Horizontal -->
                        <BoxView WidthRequest="400" HeightRequest="1" BackgroundColor="#2A2A2A" Margin="0,40,0,0"/>
                        <BoxView WidthRequest="400" HeightRequest="1" BackgroundColor="#2A2A2A" Margin="0,80,0,0"/>
                        <BoxView WidthRequest="400" HeightRequest="1" BackgroundColor="#2A2A2A" Margin="0,120,0,0"/>
                        <BoxView WidthRequest="400" HeightRequest="1" BackgroundColor="#2A2A2A" Margin="0,160,0,0"/>
                        
                        <!-- Grid Lines Vertical -->
                        <BoxView WidthRequest="1" HeightRequest="200" BackgroundColor="#2A2A2A" Margin="-150,0,0,0"/>
                        <BoxView WidthRequest="1" HeightRequest="200" BackgroundColor="#2A2A2A" Margin="-75,0,0,0"/>
                        <BoxView WidthRequest="1" HeightRequest="200" BackgroundColor="#2A2A2A"/>
                        <BoxView WidthRequest="1" HeightRequest="200" BackgroundColor="#2A2A2A" Margin="75,0,0,0"/>
                        <BoxView WidthRequest="1" HeightRequest="200" BackgroundColor="#2A2A2A" Margin="150,0,0,0"/>
                        
                        <!-- 3D Objects -->
                        <Border WidthRequest="80" HeightRequest="80" BackgroundColor="#4A4A4A" StrokeShape="RoundRectangle 4" Stroke="#5A5A5A" Margin="-60,-30,0,0">
                            <Grid>
                                <BoxView BackgroundColor="#555" WidthRequest="70" HeightRequest="10" VerticalOptions="Start" HorizontalOptions="Center" Margin="0,5,0,0"/>
                            </Grid>
                        </Border>
                        
                        <Border WidthRequest="50" HeightRequest="50" BackgroundColor="#666" StrokeShape="Ellipse" Stroke="{StaticResource Accent}" StrokeThickness="2" Margin="80,-20,0,0"/>
                        
                        <Border WidthRequest="120" HeightRequest="30" BackgroundColor="#3A3A3A" StrokeShape="RoundRectangle 2" Stroke="#4A4A4A" Margin="0,70,0,0"/>
                    </Grid>

                    <!-- Axis Gizmo -->
                    <Grid WidthRequest="60" HeightRequest="60" HorizontalOptions="End" VerticalOptions="End" Margin="0,0,20,20">
                        <BoxView WidthRequest="40" HeightRequest="2" BackgroundColor="#E74C3C" HorizontalOptions="Center" VerticalOptions="Center"/>
                        <BoxView WidthRequest="2" HeightRequest="40" BackgroundColor="#2ECC71" HorizontalOptions="Center" VerticalOptions="Center"/>
                        <Label Text="X" TextColor="#E74C3C" FontSize="8" HorizontalOptions="End" VerticalOptions="Center" Margin="0,0,2,0"/>
                        <Label Text="Y" TextColor="#2ECC71" FontSize="8" HorizontalOptions="Center" VerticalOptions="Start"/>
                        <Label Text="Z" TextColor="#3498DB" FontSize="8" HorizontalOptions="Start" VerticalOptions="Center" Margin="2,0,0,0"/>
                    </Grid>

                    <!-- Viewport Toolbar -->
                    <Border HorizontalOptions="Start" VerticalOptions="Start" BackgroundColor="#2D2D30CC" StrokeShape="RoundRectangle 4" Margin="10" Padding="2">
                        <HorizontalStackLayout Spacing="1">
                            <Border BackgroundColor="{StaticResource Accent}" StrokeShape="RoundRectangle 3" Padding="8,4">
                                <Label Text="Perspective" TextColor="White" FontSize="9"/>
                            </Border>
                            <Border BackgroundColor="Transparent" Padding="8,4">
                                <Label Text="Lit" TextColor="{StaticResource TextGray}" FontSize="9"/>
                            </Border>
                            <Border BackgroundColor="Transparent" Padding="8,4">
                                <Label Text="Show â–¾" TextColor="{StaticResource TextGray}" FontSize="9"/>
                            </Border>
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Viewport Stats -->
                    <Border HorizontalOptions="End" VerticalOptions="Start" BackgroundColor="#1A1A1ACC" StrokeShape="RoundRectangle 4" Margin="10" Padding="8,4">
                        <VerticalStackLayout Spacing="2">
                            <Label Text="FPS: 120.0" TextColor="{StaticResource PlayGreen}" FontSize="9"/>
                            <Label Text="MS: 8.33" TextColor="{StaticResource TextGray}" FontSize="8"/>
                            <Label Text="Tris: 1.2M" TextColor="{StaticResource TextGray}" FontSize="8"/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Camera Speed -->
                    <Border HorizontalOptions="End" VerticalOptions="End" BackgroundColor="#2D2D30CC" StrokeShape="RoundRectangle 4" Margin="10,0,90,20" Padding="6,3">
                        <HorizontalStackLayout Spacing="4">
                            <Label Text="ðŸ“·" FontSize="10"/>
                            <Label Text="Speed: 4" TextColor="{StaticResource TextGray}" FontSize="9"/>
                        </HorizontalStackLayout>
                    </Border>
                </Grid>
            </Grid>

            <!-- Right Splitter -->
            <BoxView Grid.Column="3" BackgroundColor="{StaticResource Border}" WidthRequest="1"/>

            <!-- RIGHT PANEL - OUTLINER + DETAILS -->
            <Grid Grid.Column="4" RowDefinitions="*, 3, 1.5*" BackgroundColor="{StaticResource BgPanel}">
                
                <!-- World Outliner -->
                <Grid Grid.Row="0" RowDefinitions="26, Auto, *">
                    
                    <!-- Header with Tabs -->
                    <Border Grid.Row="0" BackgroundColor="{StaticResource BgHeader}">
                        <Grid ColumnDefinitions="*,Auto">
                            <HorizontalStackLayout Spacing="0">
                                <Border BackgroundColor="{StaticResource BgMain}" Padding="10,4" StrokeThickness="0,0,0,2" Stroke="{StaticResource Accent}">
                                    <Label Text="World Outliner" TextColor="{StaticResource TextWhite}" FontSize="10"/>
                                </Border>
                            </HorizontalStackLayout>
                            <HorizontalStackLayout Grid.Column="1" Spacing="8" Margin="0,0,8,0">
                                <Label Text="ðŸ”" TextColor="{StaticResource TextDim}" FontSize="10" VerticalOptions="Center"/>
                                <Label Text="â‰¡" TextColor="{StaticResource TextDim}" FontSize="12" VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                        </Grid>
                    </Border>

                    <!-- Search Bar -->
                    <Border Grid.Row="1" BackgroundColor="{StaticResource BgInput}" Margin="6,4" StrokeShape="RoundRectangle 3" Stroke="{StaticResource Border}">
                        <Entry Placeholder="Filter..." PlaceholderColor="{StaticResource TextDim}" TextColor="{StaticResource TextWhite}" BackgroundColor="Transparent" FontSize="10" HeightRequest="24"/>
                    </Border>

                    <!-- Outliner List -->
                    <CollectionView Grid.Row="2" x:Name="SceneObjectsList" BackgroundColor="{StaticResource BgMain}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Border BackgroundColor="Transparent" Padding="0" Margin="0,1">
                                    <Grid Padding="8,5" ColumnDefinitions="14,20,*,20,20" BackgroundColor="Transparent">
                                        <Label Grid.Column="0" Text="â–¶" TextColor="{StaticResource TextDim}" FontSize="7" VerticalOptions="Center"/>
                                        <Label Grid.Column="1" Text="{Binding Icon}" FontSize="12" VerticalOptions="Center"/>
                                        <Label Grid.Column="2" Text="{Binding Name}" TextColor="{StaticResource TextGray}" FontSize="10" VerticalOptions="Center"/>
                                        <Label Grid.Column="3" Text="ðŸ‘" TextColor="{StaticResource TextDim}" FontSize="9" HorizontalOptions="Center" VerticalOptions="Center"/>
                                        <Label Grid.Column="4" Text="ðŸ”’" TextColor="{StaticResource TextDim}" FontSize="9" HorizontalOptions="Center" VerticalOptions="Center" IsVisible="{Binding IsLocked}"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </Grid>

                <!-- Horizontal Splitter -->
                <BoxView Grid.Row="1" BackgroundColor="{StaticResource Border}" HeightRequest="1"/>

                <!-- Details Panel -->
                <Grid Grid.Row="2" RowDefinitions="26, *" BackgroundColor="{StaticResource BgMain}">
                    
                    <!-- Details Header -->
                    <Border Grid.Row="0" BackgroundColor="{StaticResource BgHeader}">
                        <Grid ColumnDefinitions="*,Auto">
                            <HorizontalStackLayout Spacing="0">
                                <Border BackgroundColor="{StaticResource BgMain}" Padding="10,4" StrokeThickness="0,0,0,2" Stroke="{StaticResource AccentOrange}">
                                    <Label Text="Details" TextColor="{StaticResource TextWhite}" FontSize="10"/>
                                </Border>
                            </HorizontalStackLayout>
                            <HorizontalStackLayout Grid.Column="1" Spacing="6" Margin="0,0,8,0">
                                <Label Text="ðŸ”’" TextColor="{StaticResource TextDim}" FontSize="10" VerticalOptions="Center"/>
                                <Label Text="âš™" TextColor="{StaticResource TextDim}" FontSize="11" VerticalOptions="Center"/>
                            </HorizontalStackLayout>
                        </Grid>
                    </Border>

                    <!-- Details Content -->
                    <ScrollView Grid.Row="1" BackgroundColor="{StaticResource BgMain}">
                        <VerticalStackLayout Padding="10" Spacing="0">
                            
                            <!-- Object Name -->
                            <Border BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 3" Stroke="{StaticResource Border}" Padding="0" Margin="0,0,0,10">
                                <Entry Text="SM_Couch" TextColor="{StaticResource TextWhite}" BackgroundColor="Transparent" FontSize="11" HeightRequest="28"/>
                            </Border>

                            <!-- Add Component Button -->
                            <Border BackgroundColor="{StaticResource PlayGreen}" StrokeShape="RoundRectangle 3" Padding="8,6" Margin="0,0,0,12">
                                <Label Text="+ Add Component" TextColor="White" FontSize="10" HorizontalOptions="Center" FontAttributes="Bold"/>
                            </Border>

                            <!-- Transform Section -->
                            <Border BackgroundColor="{StaticResource BgHeader}" StrokeShape="RoundRectangle 3,3,0,0" Padding="8,6">
                                <Grid ColumnDefinitions="Auto,*,Auto">
                                    <Label Text="â–¼" TextColor="{StaticResource TextDim}" FontSize="8" VerticalOptions="Center"/>
                                    <Label Grid.Column="1" Text="Transform" TextColor="{StaticResource Accent}" FontSize="10" FontAttributes="Bold" Margin="6,0,0,0"/>
                                    <Label Grid.Column="2" Text="âŸ²" TextColor="{StaticResource TextDim}" FontSize="10"/>
                                </Grid>
                            </Border>
                            
                            <Border BackgroundColor="{StaticResource BgPanel}" StrokeShape="RoundRectangle 0,0,3,3" Padding="8" Margin="0,0,0,8">
                                <VerticalStackLayout Spacing="6">
                                    <!-- Location -->
                                    <Grid ColumnDefinitions="60,*,*,*" ColumnSpacing="4">
                                        <Label Text="Location" Style="{StaticResource PropLabel}"/>
                                        <Border Grid.Column="1" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="#E74C3C" StrokeThickness="1,0,0,0">
                                            <Entry Text="480.0" Style="{StaticResource PropEntry}" BackgroundColor="Transparent"/>
                                        </Border>
                                        <Border Grid.Column="2" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="#2ECC71" StrokeThickness="1,0,0,0">
                                            <Entry Text="330.0" Style="{StaticResource PropEntry}" BackgroundColor="Transparent"/>
                                        </Border>
                                        <Border Grid.Column="3" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="#3498DB" StrokeThickness="1,0,0,0">
                                            <Entry Text="190.0" Style="{StaticResource PropEntry}" BackgroundColor="Transparent"/>
                                        </Border>
                                    </Grid>

                                    <!-- Rotation -->
                                    <Grid ColumnDefinitions="60,*,*,*" ColumnSpacing="4">
                                        <Label Text="Rotation" Style="{StaticResource PropLabel}"/>
                                        <Border Grid.Column="1" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="#E74C3C" StrokeThickness="1,0,0,0">
                                            <Entry Text="0.0" Style="{StaticResource PropEntry}" BackgroundColor="Transparent"/>
                                        </Border>
                                        <Border Grid.Column="2" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="#2ECC71" StrokeThickness="1,0,0,0">
                                            <Entry Text="0.0" Style="{StaticResource PropEntry}" BackgroundColor="Transparent"/>
                                        </Border>
                                        <Border Grid.Column="3" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="#3498DB" StrokeThickness="1,0,0,0">
                                            <Entry Text="0.0" Style="{StaticResource PropEntry}" BackgroundColor="Transparent"/>
                                        </Border>
                                    </Grid>

                                    <!-- Scale -->
                                    <Grid ColumnDefinitions="60,*,*,*" ColumnSpacing="4">
                                        <Label Text="Scale" Style="{StaticResource PropLabel}"/>
                                        <Border Grid.Column="1" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="#E74C3C" StrokeThickness="1,0,0,0">
                                            <Entry Text="1.0" Style="{StaticResource PropEntry}" BackgroundColor="Transparent"/>
                                        </Border>
                                        <Border Grid.Column="2" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="#2ECC71" StrokeThickness="1,0,0,0">
                                            <Entry Text="1.0" Style="{StaticResource PropEntry}" BackgroundColor="Transparent"/>
                                        </Border>
                                        <Border Grid.Column="3" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="#3498DB" StrokeThickness="1,0,0,0">
                                            <Entry Text="1.0" Style="{StaticResource PropEntry}" BackgroundColor="Transparent"/>
                                        </Border>
                                    </Grid>

                                    <!-- Mobility -->
                                    <Grid ColumnDefinitions="60,*" ColumnSpacing="4">
                                        <Label Text="Mobility" Style="{StaticResource PropLabel}"/>
                                        <Border Grid.Column="1" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="{StaticResource Border}" Padding="6,4">
                                            <Grid ColumnDefinitions="*,Auto">
                                                <Label Text="Static" TextColor="{StaticResource TextWhite}" FontSize="10"/>
                                                <Label Grid.Column="1" Text="â–¾" TextColor="{StaticResource TextDim}" FontSize="10"/>
                                            </Grid>
                                        </Border>
                                    </Grid>
                                </VerticalStackLayout>
                            </Border>

                            <!-- Static Mesh Section -->
                            <Border BackgroundColor="{StaticResource BgHeader}" StrokeShape="RoundRectangle 3,3,0,0" Padding="8,6">
                                <Grid ColumnDefinitions="Auto,*">
                                    <Label Text="â–¼" TextColor="{StaticResource TextDim}" FontSize="8" VerticalOptions="Center"/>
                                    <Label Grid.Column="1" Text="Static Mesh" TextColor="{StaticResource Accent}" FontSize="10" FontAttributes="Bold" Margin="6,0,0,0"/>
                                </Grid>
                            </Border>
                            
                            <Border BackgroundColor="{StaticResource BgPanel}" StrokeShape="RoundRectangle 0,0,3,3" Padding="8" Margin="0,0,0,8">
                                <VerticalStackLayout Spacing="6">
                                    <Grid ColumnDefinitions="60,*,Auto" ColumnSpacing="4">
                                        <Label Text="Mesh" Style="{StaticResource PropLabel}"/>
                                        <Border Grid.Column="1" BackgroundColor="{StaticResource BgInput}" StrokeShape="RoundRectangle 2" Stroke="{StaticResource Border}" Padding="6,4">
                                            <Label Text="SM_Couch" TextColor="{StaticResource TextWhite}" FontSize="10"/>
                                        </Border>
                                        <Border Grid.Column="2" BackgroundColor="{StaticResource AccentOrange}" StrokeShape="RoundRectangle 2" WidthRequest="24" HeightRequest="22">
                                            <Label Text="ðŸ“‚" FontSize="10" HorizontalOptions="Center" VerticalOptions="Center"/>
                                        </Border>
                                    </Grid>
                                </VerticalStackLayout>
                            </Border>

                            <!-- Materials Section -->
                            <Border BackgroundColor="{StaticResource BgHeader}" StrokeShape="RoundRectangle 3,3,0,0" Padding="8,6">
                                <Grid ColumnDefinitions="Auto,*,Auto">
                                    <Label Text="â–¼" TextColor="{StaticResource TextDim}" FontSize="8" VerticalOptions="Center"/>
                                    <Label Grid.Column="1" Text="Materials" TextColor="{StaticResource Accent}" FontSize="10" FontAttributes="Bold" Margin="6,0,0,0"/>
                                    <Label Grid.Column="2" Text="2" TextColor="{StaticResource TextDim}" FontSize="9"/>
                                </Grid>
                            </Border>
                            
                            <Border BackgroundColor="{StaticResource BgPanel}" StrokeShape="RoundRectangle 0,0,3,3" Padding="8">
                                <VerticalStackLayout Spacing="6">
                                    <Grid ColumnDefinitions="Auto,*,40" ColumnSpacing="6">
                                        <Label Text="0" TextColor="{StaticResource TextDim}" FontSize="10" VerticalOptions="Center"/>
                                        <Label Grid.Column="1" Text="M_Leather_Brown" TextColor="{StaticResource TextGray}" FontSize="10" VerticalOptions="Center"/>
                                        <Border Grid.Column="2" BackgroundColor="#4A3728" StrokeShape="RoundRectangle 3" Stroke="{StaticResource Border}" HeightRequest="24"/>
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto,*,40" ColumnSpacing="6">
                                        <Label Text="1" TextColor="{StaticResource TextDim}" FontSize="10" VerticalOptions="Center"/>
                                        <Label Grid.Column="1" Text="M_Wood_Oak" TextColor="{StaticResource TextGray}" FontSize="10" VerticalOptions="Center"/>
                                        <Border Grid.Column="2" BackgroundColor="#5D4E37" StrokeShape="RoundRectangle 3" Stroke="{StaticResource Border}" HeightRequest="24"/>
                                    </Grid>
                                </VerticalStackLayout>
                            </Border>

                        </VerticalStackLayout>
                    </ScrollView>
                </Grid>
            </Grid>
        </Grid>

        <!-- === STATUS BAR === -->
        <Border Grid.Row="3" BackgroundColor="{StaticResource BgDark}" StrokeThickness="0,1,0,0" Stroke="{StaticResource Border}">
            <Grid ColumnDefinitions="Auto, *, Auto, Auto, Auto" Padding="10,0">
                
                <!-- Left Status -->
                <HorizontalStackLayout Grid.Column="0" Spacing="15" VerticalOptions="Center">
                    <HorizontalStackLayout Spacing="4">
                        <Label Text="â—" TextColor="{StaticResource PlayGreen}" FontSize="8" VerticalOptions="Center"/>
                        <Label Text="Ready" TextColor="{StaticResource TextGray}" FontSize="10" VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    <Label Text="|" TextColor="{StaticResource Border}" FontSize="10"/>
                    <Label Text="Actors: 24" TextColor="{StaticResource TextDim}" FontSize="10" VerticalOptions="Center"/>
                </HorizontalStackLayout>

                <!-- Center - Path -->
                <Label Grid.Column="1" Text="/Game/Maps/MainLevel" TextColor="{StaticResource TextDim}" FontSize="10" HorizontalOptions="Center" VerticalOptions="Center"/>

                <!-- Source Control -->
                <Border Grid.Column="2" BackgroundColor="{StaticResource BgPanel}" StrokeShape="RoundRectangle 3" Padding="8,2" Margin="0,2">
                    <HorizontalStackLayout Spacing="4">
                        <Label Text="â¬¡" TextColor="{StaticResource PlayGreen}" FontSize="10" VerticalOptions="Center"/>
                        <Label Text="Source Control" TextColor="{StaticResource TextGray}" FontSize="10" VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                </Border>

                <!-- Progress -->
                <HorizontalStackLayout Grid.Column="3" Spacing="6" VerticalOptions="Center" Margin="10,0">
                    <Label Text="Compiling Shaders..." TextColor="{StaticResource TextDim}" FontSize="10" VerticalOptions="Center"/>
                    <Border BackgroundColor="{StaticResource BgPanel}" WidthRequest="80" HeightRequest="6" StrokeShape="RoundRectangle 3">
                        <Border BackgroundColor="{StaticResource Accent}" WidthRequest="60" HeightRequest="6" StrokeShape="RoundRectangle 3" HorizontalOptions="Start"/>
                    </Border>
                    <Label Text="75%" TextColor="{StaticResource Accent}" FontSize="10" VerticalOptions="Center"/>
                </HorizontalStackLayout>

                <!-- Scale -->
                <HorizontalStackLayout Grid.Column="4" Spacing="4" VerticalOptions="Center">
                    <Label Text="Scale:" TextColor="{StaticResource TextDim}" FontSize="10"/>
                    <Label Text="100%" TextColor="{StaticResource TextGray}" FontSize="10"/>
                </HorizontalStackLayout>
            </Grid>
        </Border>
    </Grid>
</ContentPage>